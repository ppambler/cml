### ✍️ Tangxt ⏳ 2021-12-05 🏷️ 小程序

# 02-小程序初体验

1）开篇介绍

![开篇介绍](assets/img/2021-12-05-18-34-18.png)

2）小程序开发前的准备

1. 到 [微信公众平台](https://mp.weixin.qq.com/) 注册账号 -> 注册完后微信扫码登录
2. 下载「[微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)」 -> 选择稳定版进行安装

3）开发第一个小程序应用

打开微信开发者工具，创建小程序项目：

![创建小程序项目](assets/img/2021-12-06-10-58-55.png)

微信开发者工具介绍：

![介绍](assets/img/2021-12-06-11-07-50.png)

4）了解小程序项目的基本组成结构

微信开发者工具为我们创建的这个小程序项目 -> 这里边初始化好的目录结构以及文件都起到什么作用呢？

![问题](assets/img/2021-12-06-11-21-45.png)

1、三个问题

![问题](assets/img/2021-12-06-11-26-21.png)

2、pages 目录

- `pages`目录 -> 存放所有的小程序页面 -> 每一个页面都以单独的文件夹这种形式而存在
  - 默认给了我们两个页面：`index`、`logs`
    - `index`文件夹 -> 包含了 4 个文件 -> 一个小程序页面就是由这 4 个文件所组成的
      - `index.js` -> 页面的脚本文件 -> 用来存放页面的数据、事件处理函数或者生命周期等等这些内容
      - `index.json` -> 当前这个`index`页面的配置文件，如配置当前这个页面的外观
      - `index.wxml` -> 代表页面的模板结构
      - `index.wxss` -> 代表当前页面的页面样式表
      - 以上就是组成一个页面的四个文件，以及它们各自的一个基本作用

3、utils 目录

- `utils`目录 -> 工具类文件夹 -> 你想要在这个项目里边创建一些工具文件，如`util.js`，那么你就把这个文件放到这个目录里边

4、app.js

- `app.js` -> 代表小程序的项目逻辑文件 -> 在这个文件里边，我们可以注册小程序实例、绑定生命周期回调函数、错误监听和页面不存在监听函数等等这些内容

5、app.json

- `app.json` -> 小程序公共配置文件 -> 在该文件里边包括里整个小程序里边的一些页面路径、窗口表现、设置网络超时时间、设置多 tab 等等这些内容

6、app.wxss

- `app.wxss` -> 它表示的是我们小程序当中的公共样式表

7、project.config.json

- `project.config.json` -> 项目配置文件 -> 用来记录我们对小程序开发者工具所做的一些个性化配置，比如：
  - `setting` -> 这个字段里边保存了「编译相关的配置」
  - `projectname` -> 保存的是小程序的「项目名称」
  - `appid` -> 保存的是「小程序的账号 ID」
  - ……

总之有关这个小程序开发者工具的个性化配置都记录在这个文件里边

8、sitemap.json

- `sitemap.json` -> 它表示的是小程序及其页面是否可以被微信去进行索引
  - `rules`中保存了索引规则列表的配置
  - `rules`规则中，`action`表示页面是否能被索引（`allow`，`disallow`），`page`表示生效的页面

它提供了一个链接：

``` json
{
  "desc": "关于本文件的更多信息，请参考文档 https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html",
  "rules": [{
  "action": "allow",
  "page": "*"
  }]
}
```

在这个 [链接](https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html) 里边，我们可以查看`sitemap.json`这个文件的深层次作用

![sitemap.json](assets/img/2021-12-06-11-51-09.png)

---

以上就是小程序开发者工具默认配置的这些初始化文件的一个作用

9、回看最初的三个问题

问题 1：

![问题 1](assets/img/2021-12-06-11-57-57.png)

问题 2：

![问题 2](assets/img/2021-12-06-12-00-06.png)

问题 3：

![问题 3](assets/img/2021-12-06-12-02-13.png)

---

以上就是这三个问题以及它们所各自对应的答案

检测学习效果？ -> 可以轻松回答这 3 个问题，那么对于这节课的吸收基本上就没啥问题了！

5）wxml VS html

> 我们很熟悉`js`和`json`文件，可`wxml`文件和`wxss`是什么鬼？

开头还是提出一个问题，带着这个问题去学习会事半功倍：

![wxml 问题](assets/img/2021-12-08-13-04-25.png)

1、什么是 wxml？

`WXML`（`WeiXin Markup Language`）是框架设计的一套标签语言，这套标签语言里边我们所写入的都是微信小程序之中给我们准备好的一些组件，这些东西可以**用来构建小程序页面的结构**，其作用非常类似于我们网页开发中的 `HTML`，比如我们在 HTML 文件里边写`span`，`div`等，而我们在 WXML 文件里边也是在做类似的事情

2、WXML 和 HTML 的区别

- 标签名称不同
 - HTML(div, span, img, a)
 - WXML(view, text, image, navigator) -> 小程序提供的对应组件

![标签名](assets/img/2021-12-08-13-15-27.png)

- 属性节点不同
 - `<a href="#">超链接</a>` -> HTML 里边给`href`值
 - `<navigator url="/pages/home/home">跳转到 home 页</navigator>` -> WXML 里边写的是微信小程序给我们提供的组件，我们能传入的这些内容，如`url="/pages/home/home"`，都是组件给我们提供的一些能力或者说是`prop` -> 学过 Vue 都知道 -> 总之，我们往`wxml`里边写的东西叫做组件，组件里边的这些属性都是可以在组件之中去进行定义的

还提供了一些功能上的不同，比如：

- 提供了动态渲染数据的模板语法
 - 数据绑定
 - 条件渲染
 - 列表渲染

---

WXML 类似 网页开发中的 HTML，它与 HTML 的不同，大概有三点！

回到最初的那个问题，我们能否在`wxml`里边写 HTML 标签呢？ -> 从目前所了解到的知识，显然是不可以的

当然，眼见为实，耳听为虚

我们测试得知：

![测试](assets/img/2021-12-08-13-28-56.png)

3、问题答案

![答案](assets/img/2021-12-08-13-33-31.png)

总之，一旦我们在`wxml`文件里边写入了一个小程序不认识的标签，那这个标签就会被渲染成为一个`view`标签 -> `view`标签的作用类似 `html` 文件里边的`div`标签

这就是为啥`div`和`h1`可以被解析，其内容可以显示出来，但其样式不能显示出来的原因 -> `h1`的效果被取消掉了，因为它被变成了一个类似于`view`标签的效果

6）wxss VS css

1、问题

> 1. `wxss` 新增了什么尺寸单位？
> 2. `wxss` 中推荐使用什么选择器？

2、知识点

![问题](assets/img/2021-12-08-16-29-19.png)

1. 什么是 `WXSS`
   - WXSS` (`WeiXin Style Sheets`) 是一套样式语言，用于描述 `WXML` 的组件样式
   - 类似于网页开发中的 `CSS`
   - `WXSS` 具有 `CSS` 大部分的特性
2. 新增了尺寸单位 --  **rpx**，一个 `rpx` 表示为页面宽度的 `1 / 750` -> 说白了，微信就是把整个页面的宽度平分为 750 等份，其中一等份就代表`1rpx`
   
   ![rpx](assets/img/2021-12-08-16-43-42.png)
   
3. 提供了全局的样式和局部样式。
   1. 全局样式：只要被写入到 **根目录的`wxss`** 中的样式，我们就称之为全局样式
   2. 局部样式：写入到 **页面的 `wxss` ** 中的样式
   
   ![全局的样式和局部的样式](assets/img/2021-12-08-16-50-00.png)
   
4. 此外 `WXSS` 仅支持部分 `CSS` 选择器
   1. **`.class`（推荐使用）** 和 `#id`
   2. `element`   
   3. 并集选择器和后代选择器 
   4. `::after` 和 `::before` 等伪类选择器

3、答案

> 1. `wxss` 新增了什么尺寸单位？
>    1. `rpx` 尺寸单位，一个 `rpx` 为页面宽度的 `1 / 750`
> 2. `wxss` 中推荐使用什么选择器？
>    1. 最推荐使用`.class` 类选择器

![答案](assets/img/2021-12-08-16-53-32.png)

7）.json 文件

1、问题

> 1. 小程序中的 `.json` 文件主要分为哪两种？
> 2. 当这两种配置文件，一旦出现相同配置时，那么这会出现什么样的结果？

2、.json 文件所起到的作用

小程序中，额外多出了一个 `.json` 的配置文件，`.json` 文件主要分为两个：

1. 项目根目录下的 `.json` 文件
   1. 修改项目的基本配置
      1. 首页
      2. `navigationBarBackgroundColor`
2. 页面中的 `.json` 文件
   1. 修改页面的基本配置（优先级高）
      1. `navigationBarBackgroundColor`

![json 配置文件](assets/img/2021-12-08-17-20-56.png)

3、答案

> 1. 小程序中的 `.json` 文件主要分为哪两种？
>    1. 项目根目录下的 `.json` 文件
>    2. 页面中的 `.json` 文件
> 2. 当这两种配置文件出现相同配置时，会出现什么结果？
>    1. 以页面的 `.json` 文件为主或者说页面的`.json`文件优先级更高，会覆盖全局配置中的`.json`文件

8）宿主环境与小程序的运行环境

1、问题

![问题](assets/img/2021-12-08-17-24-24.png)

2、宿主环境指的是什么？

1. 宿主环境指的是 **程序运行所必须的依赖环境**
   1. web 前端的宿主环境为：浏览器
   2. `android` 软件的宿主环境为：`android` 系统
   3. `IOS` 软件的宿主环境为：`IOS` 系统
2. 小程序的宿主环境是什么？
   1. 小程序的宿主环境为：**手机微信**
      1. 所以：小程序可以调用 **手机微信** 中的
         1. 扫码
         2. 支付
         3. 登录
         4. 分享
         5. 等等功能

3、小程序的运行环境

![运行环境](assets/img/2021-12-08-17-29-57.png)

1. 小程序的运行环境分成**渲染层**和**逻辑层**
   1. 其中 `WXML` 模板和 `WXSS` 样式工作在**渲染层**
      1. **渲染层**的界面使用了`WebView` 进行渲染
      2. 如果一个小程序存在**多个界面**，那么渲染层就会存在**多个`WebView`**线程
   2. JS 脚本工作在**逻辑层**。
      1. **逻辑层**采用`JsCore`线程运行 JS 脚本
2. 这**两个线程的通信**会经由**微信客户端**做中转
   1. **逻辑层**发送**网络请求**也会经由 **`Native（手机原生系统）`** 去进行一个转发

以上只是对小程序的运行环境的一个简单的叙述 -> 仅作了解即可

4、答案

> 1. 什么是**宿主环境**？
>    1. 宿主环境指的是 **程序运行时所必须的依赖环境** -> 如 web 前端依赖于 web 浏览器，安卓 App 需要依赖于安卓系统，IOS APP 需要依赖于 IOS 系统
> 2. 微信小程序项目为什么可以调用 **微信支付** 功能？
>    1. 因为 微信小程序 的宿主环境为 **手机微信**，而 **手机微信** 提供了对应的功能
> 3. 小程序的运行环境是如何划分的？
>    1. 小程序的运行环境分成两部分，分别是**渲染层**和**逻辑层**

9）小程序内置组件-view
