### âœï¸ Tangxt â³ 2021-12-21 ğŸ·ï¸ uni-app

# 06-æ–‡ç« æœç´¢é¡µé¢

1ï¼‰å¼€ ç¯‡ï¼ˆæ·»åŠ ç‰‡å¤´ï¼‰

åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº† **çƒ­æœé¦–é¡µ** çš„å¼€å‘ï¼Œè™½ç„¶ç»å†äº† â€åƒè¾›ä¸‡è‹¦â€œ ï¼Œä½†æ˜¯å¯¹å¤§å®¶æ¥è¯´ï¼Œåº”è¯¥ä¹Ÿæ˜¯æ”¶è·æ»¡æ»¡ã€‚

é‚£ä¹ˆåœ¨è¿™ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬å°†ä¼šè¿›å…¥æ–°çš„ç¯‡ç« ï¼Œæ¥åˆ° **æ–‡ç« æœç´¢** é¡µé¢çš„å¼€å‘ã€‚é‚£ä¹ˆåœ¨ **æ–‡ç« æœç´¢** çš„é¡µé¢å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åˆä¼šç»å†å“ªäº› **å¥‡å¥‡æ€ªæ€ªçš„ `bug` ï¼Œåˆå°†ä¼šè·å¾—å“ªäº›æ–°çš„æ”¶è·å‘¢ï¼Ÿ** 

è®©æˆ‘ä»¬ä¸€èµ·æœŸå¾…å§ï¼

2ï¼‰æ–‡ç« æœç´¢ - åˆ†ææ–‡ç« æœç´¢é¡µé¢

åœ¨å¼€å‘æ–‡ç« æœç´¢é¡µé¢ä¹‹å‰ï¼Œå…ˆæ¥åˆ†æä¸€ä¸‹è¿™ä¸ªæœç´¢é¡µé¢éƒ½æœ‰å“ªäº›å†…å®¹â€¦â€¦

![æ–‡ç« æœç´¢](assets/img/2021-12-21-11-28-27.png)

æ•´ä¸ªæœç´¢é¡µé¢åˆ†ä¸ºä¸‰å—å¤§çš„å†…å®¹ï¼š

> é¦–é¡µ -> ç‚¹å‡»æœç´¢æ¡† -> æ…•è¯¾æœç´¢é¡µé¢ -> èšç„¦ã€Œæœç´¢æ¡†ã€ -> æœç´¢å†å²é¡µé¢ -> å¾€è¾“å…¥æ¡†è¾“å…¥å†…å®¹æˆ–ä¸è¾“å…¥å†…å®¹ï¼Œå›è½¦ -> æœç´¢ç»“æœé¡µé¢

1. ã€æ…•è¯¾çƒ­æœã€‘
   1. å±•ç¤º 8 ä¸ªçƒ­æœå†…å®¹
2. ã€æœç´¢å†å²ã€‘
   1. æŒ‰ç…§ã€ä»åå‘å‰ã€‘çš„é¡ºåºï¼Œå±•ç¤ºæœç´¢å†å²
   2. ç‚¹å‡»ã€å°åƒåœ¾ç­’ã€‘å¯åˆ é™¤å†å²è®°å½• -> å¯å…¨éƒ¨åˆ é™¤ã€å¯é€‰æ‹©æ€§åˆ é™¤
3. ã€æœç´¢ç»“æœã€‘
   1. ä¸è¾“å…¥å†…å®¹ç›´æ¥å›è½¦ï¼ŒæŒ‰ç…§å½“å‰çš„ `placeholder` ç´¢å¼•
   2. è¾“å…¥å†…å®¹ï¼ŒæŒ‰ç…§å½“å‰å†…å®¹ç´¢å¼•
   3. `item` çš„å±•ç¤ºåˆ†ä¸ºä¸‰ç±»
      1. æ— å›¾ç‰‡å±•ç¤º
      2. å•ä¸ªå›¾ç‰‡å±•ç¤º 
      3. ä¸‰ä¸ªå›¾ç‰‡å±•ç¤º
   4. item ä¸­å…³é”®å­—é«˜äº®
   5. å…·å¤‡ä¸‹æ‹‰åˆ·æ–°ï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤š
   6. ç‚¹å‡» ã€å‰å·ã€‘è¿”å›ã€æœç´¢å†å²ã€‘
   7. ç‚¹å‡»ã€å–æ¶ˆã€‘è¿”å›ã€æ…•è¯¾çƒ­æœã€‘

ä»¥ä¸Šè¿™äº›å†…å®¹ï¼Œå°±æ˜¯æˆ‘ä»¬æ•´ä¸ªæ–‡ç« æœç´¢é¡µé¢ä¹‹ä¸­æ‰€å…·å¤‡çš„ä¸€äº›èƒ½åŠ›ï¼Œæ¥ä¸‹æ¥çš„å¼€å‘å°±æ˜¯å›´ç»•è¿™ä¸‰å¤§å—æ¥è¿›è¡Œå¼€å‘ï¼

3ï¼‰æ–‡ç« æœç´¢ - ä½¿ç”¨åˆ†åŒ…ï¼Œåˆ›å»º `search-blog` é¡µé¢

åˆ›å»ºæ–‡ç« æœç´¢é¡µé¢ï¼Œå³åˆ›å»º`search-blog`é¡µé¢

ä½†åœ¨åˆ›å»ºè¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ã€Œåˆ†åŒ…ã€è¿™ä¸ªæ¦‚å¿µæ¥åˆ›å»ºæˆ‘ä»¬çš„é¡µé¢

1ã€åˆ†åŒ…

ğŸ’¡ï¼šä»€ä¹ˆæ˜¯åˆ†åŒ…ï¼Ÿ

[åˆ†åŒ…](https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html) æŒ‡çš„æ˜¯å°†å°ç¨‹åºåˆ’åˆ†æˆä¸åŒçš„å­åŒ…ï¼Œåœ¨æ„å»ºæ—¶æ‰“åŒ…æˆä¸åŒçš„åˆ†åŒ…ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨æ—¶æŒ‰éœ€è¿›è¡ŒåŠ è½½

ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®æ‹†æˆäº†ä¸åŒçš„å‡ ä¸ªå­é¡¹ç›®ï¼Œæˆ–è€…ä½ å¯ä»¥è®¤ä¸ºæˆ‘ä»¬å°†ä¸€ä¸ªå¤§çš„ JS æ–‡ä»¶æŒ‰ç…§æ¨¡å—æ‹†æˆäº†å‡ ä¸ªå°çš„ JS æ–‡ä»¶ -> å½“æˆ‘ä»¬å»æ„å»ºæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠè¿™äº›åŠŸèƒ½æ‰“åŒ…æˆä¸åŒçš„åˆ†åŒ…ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¨¡å— -> å½“ç”¨æˆ·ä½¿ç”¨æ—¶å°±å¯ä»¥è¿›è¡ŒæŒ‰éœ€åŠ è½½äº†

> æŠŠã€Œå°ç¨‹åºã€çœ‹åšæ˜¯ä¸€ä¸ªå¤§çš„ JS æ–‡ä»¶ï¼ŒæŠŠã€Œå­åŒ…ã€çœ‹åšæ˜¯å°çš„æ¨¡å—ï¼Œé‚£ä¹ˆã€Œå•¥æ˜¯åˆ†åŒ…ã€å°±å¾ˆå¥½ç†è§£äº†

ğŸ’¡ï¼šåˆ†åŒ…çš„å¥½å¤„

- å¯ä»¥ä¼˜åŒ–å°ç¨‹åºé¦–æ¬¡å¯åŠ¨çš„ä¸‹è½½æ—¶é—´ -> å¦‚æœ¬æ¥è¦ä¸‹è½½ä¸€ä¸ªå¤§çš„ JS æ–‡ä»¶ï¼ˆ`100 k`ï¼‰ï¼Œç°åœ¨æŠŠå®ƒæ‹†æˆåä¸ªå°æ¨¡å—ï¼ˆå‡è®¾æ¯ä¸ªæ¨¡å—æ˜¯`10 k`ï¼‰ï¼Œå¯ä»¥çœ‹åˆ° `10 k`çš„ä¸‹è½½é€Ÿåº¦æ˜¾ç„¶è¦æ¯”`100 k`çš„å¿«ï¼
- åœ¨å¤šäººåä½œå…±åŒå¼€å‘æ—¶ï¼Œå¯ä»¥æ›´å¥½çš„è§£è€¦åä½œ -> 10 ä¸ªäººæ”¹ä¸€ä¸ª JS æ–‡ä»¶å’Œä¸€ä¸ªäººæ”¹ä¸€ä¸ª JS æ–‡ä»¶ -> æ–¹ä¾¿è§£è€¦åä½œ

å¾®ä¿¡å°ç¨‹åºæä¾›äº†åˆ†åŒ…çš„èƒ½åŠ›ï¼Œè€Œ uni-app ä¹Ÿå¯¹åˆ†åŒ…çš„åŠŸèƒ½è¿›è¡Œäº†æ”¯æŒï¼

2ã€å®ç°åˆ†åŒ…

åœ¨ uni-app ä¸­å¦‚ä½•å®ç°åˆ†åŒ…åŠŸèƒ½ ï¼Ÿ

1. æ‰“å¼€ `pages.json`ï¼Œæ–°å»º `subPackages` èŠ‚ç‚¹ -> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸€ä¸ªå¯¹è±¡å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªåˆ†åŒ…
2. èŠ‚ç‚¹ä¸­æ¯ä¸ªå¯¹è±¡ä¸ºä¸€ä¸ªåˆ†åŒ…ï¼Œå…¶ä¸­
   1. `root`ï¼šåˆ†åŒ…åŒ…å
   2. `name`ï¼šåˆ†åŒ…åˆ«å
   3. `pages`ï¼šåˆ†åŒ…ä¸‹çš„å…³äºåˆ«åçš„é¡µé¢è·¯å¾„å’Œçª—å£è¡¨ç°
      1. `path`ï¼šåˆ†åŒ…ä¸‹çš„é¡µé¢è·¯å¾„
      2. `style`ï¼šé¡µé¢çš„æ ·å¼
3. è‡ªå·±æ‰‹åŠ¨åˆ›å»ºé¡µé¢ï¼Œå°ç¨‹åºé‡Œè¾¹ä¼šæ ¹æ®è¿™ä¸ª`path`è‡ªåŠ¨åˆ›å»ºé¡µé¢
   1. æ–°å»ºä¸€ä¸ª`subpkg`ç›®å½•
      1. åˆ›å»ºä¸€ä¸ª`pages`ç›®å½• -> å­˜æ”¾å½“å‰æ‰€æœ‰çš„é¡µé¢
         1. å³é”®ï¼Œæ–°å»º uni-app é¡µé¢ï¼š`search-blog.vue` -> å¦‚æœä½ å¯¹ uni-app ä¸çˆ½ï¼Œé‚£ä½ å¯ä»¥åœ¨ VS Code é‡Œè¾¹é€šè¿‡ä¹‹å‰å®‰è£…çš„æ’ä»¶æ¥æ–°å»ºé¡µé¢

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/fbfa7eb)

![åˆ†åŒ…](assets/img/2021-12-21-16-52-37.png)

> åˆ›å»ºçš„`search-blog.vue`æ˜¯å­é¡µé¢ -> è¿™ä¸ªæ–‡ä»¶åœ¨`subpkg/pages/search-blog/`é‡Œè¾¹ï¼Œæˆ‘ä»¬å¾—æ‰‹åŠ¨åˆ›å»ºå®ƒ -> ä½ ç”¨ HbuilderX åˆ›å»ºè¿™ä¸ªé¡µé¢æ—¶ï¼Œä¼šæœ‰ä¸å¥½çš„ä½“éªŒ

ğŸ’¡ï¼šå¦‚ä½•éªŒè¯æˆ‘ä»¬å½“å‰çš„åˆ†åŒ…å·²ç»å®ç°äº†ï¼Ÿ

![éªŒè¯åˆ†åŒ…æƒ…å†µ](assets/img/2021-12-21-16-47-20.png)

å¾®ç¬‘å°ç¨‹åºå¼€å‘è€…åŠŸèƒ½ -> è¯¦æƒ… -> æœ¬åœ°ä»£ç æœ‰ï¼šä¸»åŒ… + `/subpkg/`ï¼ˆåˆ†åŒ…ï¼‰è¿™ä¸¤ä¸ªåŒ… -> è¿™å°±è¯æ˜æˆ‘ä»¬çš„åˆ†åŒ…å·²ç»åˆ›å»ºå®Œæˆäº†

å¦‚æœæ²¡ç”Ÿæ•ˆï¼Œè¯·æ³¨æ„æ˜¯ä¸æ˜¯ uni-app çš„ç¼–è¯‘é—®é¢˜ï¼

---

æˆ‘çœ‹äº†è¿™ä¸ªé¡¹ç›®æœ€ç»ˆå®Œæˆæ—¶çš„åˆ†åŒ…ä»£ç ï¼š

![åˆ†åŒ…](assets/img/2021-12-21-16-57-12.png)

è¿™æ ·å²‚ä¸æ˜¯åªåˆ†äº†ä¸€ä¸ªåŒ…ï¼Ÿ

ğŸ‘‡ï¼šæœ‰äº†è¿™ä¸ªåˆ†åŒ…é¡µé¢åï¼Œå°±å¯ä»¥æ¥å¼€å‘è¿™ä¸ª`search-blog`é¡µé¢äº†

4ï¼‰æ–‡ç« æœç´¢ - å®Œæˆè·³è½¬ï¼Œæ¸²æŸ“æœç´¢æ¡†

å®šä½åˆ°é¦–é¡µï¼Œå®Œæˆé¡µé¢è·³è½¬

1. `hot.vue` -> `my-search`ç»„ä»¶çš„åŒ…è£¹å™¨`view`æ·»åŠ ç‚¹å‡»äº‹ä»¶ -> `@click="onToSearch"`
2. ç”¨æˆ·ç‚¹å‡»è¿™ä¸ª`view` -> è§¦å‘`onToSearch` -> ä½¿ç”¨`uni.navigateTo({})`æ–¹æ³•å®Œæˆé¡µé¢è·³è½¬ -> é¡µé¢è·¯å¾„åœ¨åˆ†åŒ…è·¯å¾„ä¸‹ï¼š`'/subpkg/pages/search-blog/search-blog'`
3. åœ¨`search-blog`é¡µé¢æ¸²æŸ“æœç´¢æ¡†
   1. `my-search`ç»„ä»¶ç›®å‰å€¼æ‹¥æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œè¿˜æ²¡æœ‰è¾“å…¥çš„èƒ½åŠ› -> æˆ‘ä»¬éœ€è¦èµ‹äºˆå®ƒæ–°èƒ½åŠ›ï¼ˆä¸‹ä¸€èŠ‚å†èµ‹äºˆï¼Œè¿™èŠ‚åªæ˜¯è®©å®ƒæ¸²æŸ“å‡ºæ¥ï¼‰
   2. æ·»åŠ åŸºç¡€ç»“æ„
   3. æ·»åŠ åŸºç¡€æ ·å¼ -> æœ‰å¸é¡¶æ•ˆæœ

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-21-17-55-54.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/6c7c95a)

5ï¼‰æ–‡ç« æœç´¢ - ä¸º `my-search` ç»„ä»¶èµ‹äºˆæœç´¢çš„èƒ½åŠ›-1

æˆ‘ä»¬å¸Œæœ›é€šè¿‡`my-search`ç»„ä»¶æ¥æ¸²æŸ“æˆ‘ä»¬çš„æœç´¢æ¡†ï¼Œä½†æ˜¯å°±ç›®å‰çš„è¿™ä¸ª`my-search`ç»„ä»¶ï¼Œå®ƒå¹¶ä¸å…·å¤‡æœç´¢èƒ½åŠ›

ğŸ’¡ï¼šå¦‚ä½•ç»™`my-search`èµ‹äºˆæœç´¢çš„èƒ½åŠ›ï¼Ÿ

å¯¹äº uni-app æ¥è¯´ï¼Œå®ƒæä¾›äº†ä¸€ä¸ª`uni-search-bar`æœç´¢æ ç»„ä»¶

æ–‡æ¡£ï¼š[uni-search-bar æœç´¢æ  - DCloud æ’ä»¶å¸‚åœº ](https://ext.dcloud.net.cn/plugin?id=866)

è¿™ä¸ªæœç´¢æ ç»„ä»¶å…·å¤‡çš„åŠŸèƒ½ï¼š

![åŠŸèƒ½](assets/img/2021-12-21-18-07-08.png)

ä»æ–‡æ¡£é‡Œè¾¹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒçš„ï¼š

- å…¼å®¹æ€§
- åŸºæœ¬çš„ä½¿ç”¨å§¿åŠ¿
- API
- äº‹ä»¶
- æ’æ§½ï¼ˆæ›¿æ¢`icon`ï¼‰

æˆ‘ä»¬ä¹‹å‰åˆ›å»ºè¿™ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œé€‰æ‹©äº†`uni-ui`ï¼Œæ‰€ä»¥è¿™ä¸ªæœç´¢æ ç»„ä»¶å·²ç»è¢«å®‰è£…äº†

![æœç´¢æ ç»„ä»¶](assets/img/2021-12-21-18-11-27.png)

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒ

æ€»ä¹‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥å®Œæˆæˆ‘ä»¬çš„æœç´¢åŠŸèƒ½

ğŸ’¡ï¼šå®ç°é€»è¾‘

> ä¸ºäº†å¥½è°ƒè¯•ï¼ˆä¸è¦æ¯æ¬¡éƒ½åœ¨`hot`é¡µé¢ç‚¹å‡»ç„¶åè¿›å…¥é¡µé¢ï¼‰ï¼Œè¯·ä¿®æ”¹ç¼–è¯‘æ¨¡å¼ï¼ŒæŠŠ`search-blog`é¡µé¢ä½œä¸ºå¯åŠ¨é¡µé¢

1. å®šä½åˆ°`my-search.vue`
   1. æ·»åŠ `uni-search-bar`ç»„ä»¶æ ‡ç­¾
   2. ã€Œæœç´¢æŒ‰é’®ã€å’Œã€Œæœç´¢è¾“å…¥æ¡†ã€ä¸èƒ½åŒæ—¶å±•ç¤º -> æ·»åŠ `isShowInput`è¿™ä¸ª`props`
   3. æ ¹æ®æƒ³è¦çš„æ•ˆæœ -> æ·»åŠ æ ·å¼ -> ç”±äºè¿™ä¸ªç»„ä»¶åœ¨å¾ˆå¤šåœ°æ–¹éƒ½è¦ç”¨ï¼Œæ‰€ä»¥ä¸è¦æŠŠæ ·å¼ç»™å†™æ­»äº† -> æ·»åŠ é…ç½®å¯¹è±¡`config`è¿™ä¸ª`props`ï¼ˆæœ‰å›¾æ ‡ã€èƒŒæ™¯è‰²ã€è¾¹æ¡†ç­‰æ ·å¼çš„é…ç½®ï¼‰ -> è®©çˆ¶ç»„ä»¶æŒ‡å®š`my-search`çš„æ ·å¼
2. ç»™`uni-search-bar`ä¼ é€’å‚æ•°ï¼Œå¦‚`radius`ã€`bgColor`ç­‰
   1. æ·»åŠ æ’æ§½ -> æŒ‡å®šå›¾æ ‡ï¼šä½¿ç”¨`uni-icons`ç»„ä»¶ï¼Œå›¾æ ‡ç±»å‹æ˜¯`clear`
3. ç»™`my-search-bar`æ·»åŠ å®½åº¦`100%`æ ·å¼
4. æ”¹é€ è¾“å…¥æ¡†ï¼Œè®©å®ƒç¬¦åˆæœ€ç»ˆå®ç°æ•ˆæœ -> æœç´¢æ¡†çš„äº¤äº’ -> æ ¹æ®è¾“å…¥å†…å®¹ï¼Œç‚¹å‡»æŒ‰é’®ç­‰ï¼Œå…¶åº•éƒ¨ä¼šæœ‰è§†å›¾åˆ‡æ¢
   1. ç»‘å®š`value`ï¼š`uni-search-bar`ä¸ä½¿ç”¨åŒå‘æ•°æ®ç»‘å®šï¼Œå› ä¸ºä¼šä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ® -> æ¯•ç«Ÿæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª`value` props -> æ‰€ä»¥ä½¿ç”¨å•å‘ç»‘å®š
   2. ç»‘å®šäº‹ä»¶ -> çœ‹æ–‡æ¡£äº†è§£è¿™äº›äº‹ä»¶æœ‰å•¥ç”¨

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/536ef29)

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-21-19-07-13.png)

ğŸ’¡ï¼š`uni-icons`çš„æ•ˆæœ

![uni-icons](assets/img/2021-12-21-18-50-06.png)

6ï¼‰æ–‡ç« æœç´¢ - ä¸º `my-search` ç»„ä»¶èµ‹äºˆæœç´¢çš„èƒ½åŠ›-2 

ğŸ’¡ï¼šä»€ä¹ˆæ—¶å€™è§¦å‘æŸä¸ªäº‹ä»¶ï¼Ÿ

![è§¦å‘äº‹ä»¶](assets/img/2021-12-21-19-24-03.png)

> `confirm`åœ¨è¾“å…¥æ¡†å†…å›è½¦å°±ä¼šè§¦å‘

ğŸ’¡ï¼šè®©`my-search`ç»„ä»¶å…·å¤‡éå¸¸å¼ºå¤§çš„æœç´¢è¾“å…¥æ¡†èƒ½åŠ›

`my-search`ç»„ä»¶è¾“å…¥å†…å®¹ -> è§¦å‘`onInput`äº‹ä»¶ -> æŠŠè¿™ä¸ªäº‹ä»¶çš„å‘ç”Ÿé€šçŸ¥ç»™çˆ¶ç»„ä»¶ï¼Œå¹¶ä¸”æŠŠè¿™æ¬¡è¾“å…¥çš„å†…å®¹ä¼ ç»™çˆ¶ç»„ä»¶

çˆ¶ç»„ä»¶åœ¨ä½¿ç”¨`my-search`ç»„ä»¶æ—¶æ·»åŠ `v-model`

æ³¨æ„ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ª`v-model`æ˜¯æœ‰æ¡ä»¶çš„ï¼ˆvue ä¸­çš„åŸºæœ¬çŸ¥è¯†ï¼‰ï¼š

`v-model`æ˜¯ vue ä¸­å®ŒæˆåŒå‘æ•°æ®ç»‘å®šçš„æŒ‡ä»¤ï¼Œå¦‚æœè¯´è¯¥æŒ‡ä»¤æƒ³è¦åº”ç”¨åˆ°ç»„ä»¶çš„ç»‘å®šä¸­ï¼Œé‚£ä¹ˆéœ€è¦éµå®ˆä»¥ä¸‹æ¡ä»¶ï¼š

1. å­ç»„ä»¶ä¸­ï¼Œä¹Ÿå°±æ˜¯`my-search`ç»„ä»¶ä¸­æ¥æ”¶åˆ°çš„å€¼å¿…é¡»ä»¥`value`å‘½å
2. å­ç»„ä»¶ä¸­æƒ³è¦ä¿®æ”¹`value`æ—¶ï¼Œå¿…é¡»è¦å‘é€ä¸€ä¸ªå«åš`input`çš„äº‹ä»¶

æ»¡è¶³ä»¥ä¸Šä¸¤ç‚¹ï¼Œçˆ¶ç»„ä»¶å°±å¯ä»¥é€šè¿‡`v-model`æŒ‡ä»¤æŠŠå€¼ç›´æ¥ä¼ é€’ç»™`value`è¿™ä¸ª`props`äº†

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/1d3f529)

> è¿™ä¸ªä»£ç çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯æŠŠå­ç»„ä»¶è§¦å‘çš„äº‹ä»¶æŠ›ç»™çˆ¶ç»„ä»¶è¿™ä¸€å±‚å»å¤„ç† -> å…³é”®ç‚¹ï¼šçˆ¶å­ç»„ä»¶çš„åŒå‘æ•°æ®ç»‘å®šï¼

ğŸ’¡ï¼šå ä½å†…å®¹å±…ä¸­å±•ç¤ºï¼Ÿ

![å±…ä¸­](assets/img/2021-12-21-19-47-58.png)

è®¾è®¡ç¨¿æ˜¯å±…å·¦å±•ç¤º

è¿™ä¸ªåŠŸèƒ½æ˜¯æ— æ³•é€šè¿‡`uni-search-bar`è¿›è¡Œé…ç½®çš„ï¼Œæ¯•ç«Ÿå®ƒæ²¡æœ‰æä¾›å¯ä»¥è®©æ–‡æœ¬å±…ä¸­è¿™æ ·çš„ä¸€ä¸ªå±æ€§

å½“ç»„ä»¶æ— æ³•æä¾›ç»™æˆ‘ä»¬æƒ³è¦çš„èƒ½åŠ›çš„æ—¶å€™ï¼Œé‚£æˆ‘ä»¬åªèƒ½å»ä¿®æ”¹è¿™ä¸ªç»„ä»¶äº† -> ä¹Ÿå°±æ˜¯ä¿®æ”¹`uni-search-bar`çš„æºä»£ç 

``` css
.uni-searchbar__box {
  /* å¤„ç†åˆå§‹ searchbar ä½ç½® */
  /* é»˜è®¤å€¼æ˜¯ center */
  justify-content: start;
}
```

è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†å¯¹æ•´ä¸ªæœç´¢æ¡†çš„èµ‹èƒ½ï¼Œæˆ‘ä»¬ç»™`my-search`ç»„ä»¶èµ‹äºˆäº†å…¨æ–°çš„èƒ½åŠ›ï¼šæœç´¢è¾“å…¥æ¡†

æœ¬è´¨å°±æ˜¯é—´æ¥ç»™`uni-search-bar`ç»„ä»¶æ·»åŠ éå¸¸å¤šçš„é…ç½®é¡¹ï¼Œä»¥åŠå¯¹åº”çš„å›è°ƒæ–¹æ³•

å¹¶ä¸”ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡`v-model`æ¥å®Œæˆçˆ¶ç»„ä»¶ä¸å­ç»„ä»¶ä¸­ç»‘å®šæ•°æ®çš„åŒå‘ç»‘å®šï¼š

çˆ¶ç»„ä»¶`search-blog`ï¼š`<my-search v-model="searchVal"></my-search>`

å­ç»„ä»¶`my-search`ï¼š`value` + `this.$emit('input',val)`

7ï¼‰æ–‡ç« æœç´¢ - æ˜¾ç¤ºæ¨èæœç´¢

éœ€è¦å‘é€è¯·æ±‚ -> çœ‹ã€Œè¿”å›é»˜è®¤æœç´¢å†…å®¹ã€è¿™ä¸ªæ¥å£

1. åˆ›å»º`api/search.js` -> å’Œæœç´¢ç›¸å…³çš„æ¥å£éƒ½åœ¨è¿™å„¿
   1. æ·»åŠ `getDefaultText`å‡½æ•°
2. åœ¨`search-blog.vue`é‡Œè¾¹å®šä¹‰`loadDefaultText`å‡½æ•° -> ç”¨æ¥åŠ è½½æ•°æ® -> åœ¨`created`é‡Œè¾¹è°ƒç”¨

![æ•ˆæœ](assets/img/2021-12-21-21-27-30.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/c41574f)

8ï¼‰æ–‡ç« æœç´¢ - åˆ›å»ºä¸‰ä¸ªä¸šåŠ¡ç»„ä»¶

åˆ›å»ºæˆ‘ä»¬å¼€å¤´æ‰€è¯´çš„ä¸‰ä¸ªç»„ä»¶ï¼š

- æ…•è¯¾çƒ­æœ
- æœç´¢å†å²
- æœç´¢ç»“æœ

æ¯•ç«Ÿæˆ‘ä»¬æ•´ä¸ªæ–‡ç« æœç´¢é¡µé¢ï¼Œè¯´ç™½äº†å°±æ˜¯ç”±è¿™ä¸‰ä¸ªç»„ä»¶æ¥ç»„æˆçš„

ç›®å‰è¿™ä¸ªä»£ç çš„æ•ˆæœæœ‰ä¸ªå°é—®é¢˜ï¼š

![æŠ–åŠ¨](assets/img/2021-12-21-21-32-10.png)

ä¸ºå•¥ä¼šæŠ–åŠ¨ï¼Ÿ

![æŠ–åŠ¨](assets/img/2021-12-21-21-37-11.png)

é»˜è®¤æƒ…å†µä¸‹æ˜¯æœ‰`5px`ï¼Œå½“ä½ è¾“å…¥æ—¶ï¼Œ`text`å˜æˆäº†`input`ï¼Œè¿™`5px`å°±æ¶ˆå¤±äº†

ğŸ’¡ï¼šåˆ›å»ºä¸‰ä¸ªç»„ä»¶

- `search-hot-list`ï¼šæœç´¢åˆ—è¡¨
- `search-history`ï¼šæœç´¢å†å²
- `search-result-list`ï¼šæœç´¢ç»“æœ

åœ¨`search-blog`é¡µé¢é‡Œè¾¹æ¸²æŸ“è¿™ä¸‰ä¸ªåŸºæœ¬ç»„ä»¶

![æ•ˆæœ](assets/img/2021-12-21-21-56-58.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/46f0424)

æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸‰ä¸ªç»„ä»¶å¯ä¸ä¼šä¸€åŒå±•ç¤ºï¼

ğŸ‘‡ï¼šæ§åˆ¶è¿™ä¸ªä¸‰ä¸ªç»„ä»¶çš„å±•ç¤ºï¼

10ï¼‰æ–‡ç« æœç´¢ - æ§åˆ¶ä¸šåŠ¡ç»„ä»¶çš„å±•ç¤ºæ•ˆæœ

æŒ‰ç…§ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œåˆ†åˆ«å±•ç¤ºè¿™ä¸‰ä¸ªç»„ä»¶ï¼š

![å±•ç¤ºç»„ä»¶](assets/img/2021-12-21-23-01-38.png)

- é»˜è®¤å±•ç¤ºã€Œæœç´¢åˆ—è¡¨ã€ -> ç‚¹å‡»äº†è¾“å…¥æ¡†çš„å–æ¶ˆæŒ‰é’®æ—¶ï¼Œä¹Ÿä¼šå±•ç¤ºã€Œæœç´¢åˆ—è¡¨ã€
- è¾“å…¥æ¡†è·å–åˆ°ç„¦ç‚¹æ—¶ï¼Œå°±ä¼šå±•ç¤ºã€Œæœç´¢å†å²ã€ -> ç‚¹å‡»è¾“å…¥æ¡†æ¸…ç©ºæŒ‰é’®æ—¶ï¼Œä¹Ÿä¼šå±•ç¤ºã€Œæœç´¢å†å²ã€
- ç”¨æˆ·ç‚¹å‡»çƒ­æœåˆ—è¡¨ `item` æˆ–è€…ç”¨æˆ·ç‚¹å‡»æœç´¢å†å² `item` æˆ–è€…è¾“å…¥æ¡†å›è½¦æˆ–è¾“å…¥å†…å®¹åå›è½¦ï¼Œå°±ä¼šå±•ç¤ºã€Œæœç´¢ç»“æœã€é¡µé¢

ç»„ä»¶çš„å±•ç¤ºé€»è¾‘ææ˜ç™½åï¼Œå°±å¾—é€šè¿‡ä»£ç æ¥å®ç°è¿™ä¸ªå±•ç¤ºé€»è¾‘äº†ï¼

ğŸ’¡ï¼šå®ç°è¿‡ç¨‹

1. é€šè¿‡ä¸€ä¸ªæ•°æ®`showType`æ¥å†³å®šå±•ç¤ºå“ªä¸ªç»„ä»¶
   1. ç”¨`0`ã€`1`ã€`2`è¡¨ç¤ºå—ï¼Ÿ -> è¿™å¾ˆä¸æ¸…æ™°ï¼Œå¾—ç”¨å¸¸é‡
   2. `HOT_LIST`ã€` SEARCH_HISTORY`ã€`SEARCH_RESULT`
   3. é»˜è®¤å€¼æ˜¯ï¼š`HOT_LIST`
2. åœ¨ HTML ä¸­ä½¿ç”¨å¸¸é‡ï¼ˆæ³¨æ„ï¼š`template`é‡Œè¾¹ï¼Œåªå¯ä»¥è®¿é—®`data`ä¸­å®šä¹‰çš„æ•°æ®ï¼‰
   1. è®©è¿™ä¸‰ä¸ªå¸¸é‡éƒ½ä½œä¸º`data`
3. æ§åˆ¶`showType`çš„å€¼ -> ä¹Ÿå°±æ˜¯é‚£å‡ ä¸ªäº‹ä»¶è¦å¹²çš„äº‹å„¿
   1. å¤±å»ç„¦ç‚¹å•¥ä¹Ÿä¸å¹² -> è¿™ä¸ªå¤„ç†å‡½æ•°æ— ç”¨
   2. æ³¨æ„è¿™ä¸ª`clear`äº‹ä»¶ -> æ­¤æ—¶å±•ç¤ºæœç´¢ç»“æœï¼Œä½ ç‚¹å‡»æ¸…ç©ºæŒ‰é’®ï¼Œä¹Ÿå¾—è¿”å›æœç´¢å†å²

![å®ç°è¿‡ç¨‹](assets/img/2021-12-22-00-13-30.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/f0bd78d)

ğŸ‘‡ï¼šå®ç°è¿™ä¸‰ä¸ªç»„ä»¶

11ï¼‰çƒ­æœåˆ—è¡¨ - æ•°æ®è·å–
