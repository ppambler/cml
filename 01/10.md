### âœï¸ Tangxt â³ 2021-12-29 ğŸ·ï¸ uni-app

# ç¬¬ 10 ç«  çƒ­æ’­æ¨¡å—

1ï¼‰å¼€ç¯‡

åœ¨æœ¬ç« èŠ‚ä¸­æˆ‘ä»¬å°†è¦å®Œæˆã€æ…•è¯¾çƒ­æœã€‘ä¸­çš„æœ€åä¸€ä¸ªæ¨¡å—ã€çƒ­æ’­ã€‘ã€‚

![æ•ˆæœ](assets/img/2021-12-29-15-05-56.png)

ã€çƒ­æ’­æ¨¡å—ã€‘åˆ†ä¸ºä¸¤ä¸ªé¡µé¢ï¼š

1. çƒ­æ’­åˆ—è¡¨
2. çƒ­æ’­è¯¦æƒ…

å¯¹äºã€çƒ­æ’­åˆ—è¡¨ã€‘è€Œè¨€ï¼ŒåŒ…å«ï¼š

1. ä¸‹æ‹‰åˆ·æ–°  + ä¸Šæ‹‰åŠ è½½æ›´å¤š
2. è§†é¢‘æ’­æ”¾ï¼ˆ`video` ç»„ä»¶ï¼‰

å¯¹äºã€çƒ­æ’­è¯¦æƒ…ã€‘è€Œè¨€ï¼ŒåŒ…å«ï¼š

1. è§†é¢‘æ’­æ”¾ï¼ˆ`video` ç»„ä»¶ï¼‰
2. åˆ†é¡µçš„å¼¹å¹•åˆ—è¡¨
3. å‘è¡¨å¼¹å¹•
4. ç‚¹èµ + æ”¶è—

æ‰€ä»¥è¯´ï¼Œå¯¹äºã€çƒ­æ’­ã€‘æ¨¡å—è€Œè¨€ï¼Œæ ¸å¿ƒçš„ç‚¹åœ¨äºã€è§†é¢‘æ’­æ”¾ã€‘ï¼Œä¹Ÿå°±æ˜¯ `video` ç»„ä»¶çš„ç”¨æ³•ã€‚

é‚£ä¹ˆä¸‹é¢å°±è®©æˆ‘ä»¬æ¥å¼€å§‹ã€çƒ­æ’­æ¨¡å—ã€‘çš„å¼€å‘å§

> æ§åˆ¶å°å‡ºç°ã€Œæ¸²æŸ“å±‚ç½‘ç»œå±‚é”™è¯¯ã€ -> è¿™ä¸æ˜¯å‰ç«¯ä»£ç çš„é—®é¢˜ï¼Œè¿™æ˜¯è§†é¢‘è¯·æ±‚çš„é—®é¢˜ï¼ -> æˆ‘ä»¬å¯ä»¥å¿½ç•¥å®ƒ

2ï¼‰çƒ­æ’­åˆ—è¡¨ - è·å–çƒ­æ’­åˆ—è¡¨æ•°æ®

1. å®šä¹‰æ¥å£ï¼š`api/video`
2. åœ¨ `hot-video` ä¸­è·å–æ•°æ®

![æ•ˆæœ](assets/img/2021-12-29-18-09-15.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/b6c14dd)

3ï¼‰çƒ­æ’­åˆ—è¡¨ - æ¸²æŸ“ UI ç»“æ„

æ–‡æ¡£ï¼š[video - uni-app å®˜ç½‘](https://uniapp.dcloud.io/component/video)

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-29-19-13-49.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/b07a3aa)

4ï¼‰çƒ­æ’­åˆ—è¡¨ - åˆ—è¡¨çš„ä¸‹æ‹‰åˆ·æ–°ä¸ä¸Šæ‹‰åŠ è½½

1. `hot-video`ï¼šåœ¨é¡µé¢ä¸­ä½¿ç”¨ `mescroll` æ¯”è¾ƒç®€å•ï¼ˆä¹‹å‰æˆ‘ä»¬æ˜¯åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼‰
   1. å¯¼å…¥ `mescroll-body`
   2. å¯¼å…¥ `mixin`
   3. æ³¨å†Œ `mixin`
   4. å®ç°å›è°ƒæ–¹æ³•

![çƒ­æ’­åˆ—è¡¨](assets/img/2021-12-29-19-42-43.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/cf950bb)

5ï¼‰çƒ­æ’­åˆ—è¡¨ - ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ

![è¯¦æƒ…é¡µ](assets/img/2021-12-29-20-09-02.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/feda621)

6ï¼‰çƒ­æ’­è¯¦æƒ… - æ¸²æŸ“è¯¦æƒ…é¡µé¢çš„è§†é¢‘ç»„ä»¶

æ²¡æœ‰è·å–å•ä¸ªè§†é¢‘çš„æ¥å£ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå•ä¸ªè§†é¢‘çš„æ•°æ®ä¼ ç»™çƒ­æ’­è¯¦æƒ…é¡µ

å› ä¸ºåœ¨ `Uniapp` ä¸­æ— æ³•ç›´æ¥é€šè¿‡ `navigateTo` æ–¹æ³•ï¼Œä¼ é€’ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚ -> `url` å‚æ•°æ˜¯æœ‰å¤§å°é™åˆ¶çš„

åœ¨ä¸ºäº†ä¸å½±å“ **ç®€æ´æ•°æ®æµ** çš„å‰æä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ `vuex` æ¥ä¿å­˜å½“å‰ç”¨æˆ·ç‚¹å‡»çš„ `video` æ•°æ®ã€‚

1. åˆ›å»º `store/video` æ¨¡å—
2. åœ¨ `store/index` ä¸­æ³¨å†Œ `video` æ¨¡å—
3. ç›‘å¬ `hot-video-item` ä¸­ `info` çš„ç‚¹å‡»äº‹ä»¶ï¼Œå¯¹çˆ¶ç»„ä»¶ä¼ é€’äº‹ä»¶
4. åœ¨ `hot-video` é¡µé¢ä¸­è¿›è¡Œè·³è½¬
5. åœ¨ `video-detail` ä¸­è·å– `video` æ•°æ®ï¼ŒåŒæ—¶æ„å»ºé¡µé¢

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-29-21-12-44.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/d31fbfa)

7ï¼‰çƒ­æ’­è¯¦æƒ… - å±•ç¤ºè§†é¢‘å¼¹å¹•

æƒ³è¦å±•ç¤ºè§†é¢‘å¼¹å¹•ï¼Œé‚£ä¹ˆé¦–å…ˆæˆ‘ä»¬éœ€è¦è·å–åˆ° **è§†é¢‘å¼¹å¹•æ•°æ®**

1. å®šä¹‰ `api` è¯·æ±‚æ¥å£
2. åœ¨ `video-detail` ä¸­è°ƒç”¨è¯¥æ¥å£ï¼Œå¹¶æŠŠè·å–åˆ°çš„æ•°æ®é€šè¿‡ `danmu-list` ç»‘å®šåˆ° `video` ç»„ä»¶ä¸­
3. æ³¨æ„ï¼šä¸ºäº†é˜²æ­¢æ— æ³•æ‰¾åˆ°å¼¹å¹•è§†é¢‘çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥æ•°æ®æ¥è¿›è¡Œè°ƒè¯•

``` json
{
  id: "8094282426594482339",
  title: "2 é¦–æ°‘è°£ã€ŠäºŒæ³‰æ˜ æœˆã€‹ã€Šçˆ±æƒ…è·¯ä¸Šé£é›¨å¤šã€‹å¥å¥ç‹¬ç‰¹ï¼Œå¸Œæœ›ä½ ä¼šå–œæ¬¢",
  author_avatar: "https://pic.rmb.bdstatic.com/bjh/user/2d39834af3abb3648bf481159561c25f.jpeg?x-bce-process=image/resize,m_lfit,w_200,h_200&autime=11152",
  poster_small:
    "https://tukuimg.bdstatic.com/processed/2cfa34e3dc199083960fdc0281edd472.jpeg@s_0,w_660,h_370,q_80",
  poster_big:
    "https://tukuimg.bdstatic.com/processed/2cfa34e3dc199083960fdc0281edd472.jpeg@s_0,w_660,h_370,q_80",
  poster_pc:
    "https://tukuimg.bdstatic.com/processed/2cfa34e3dc199083960fdc0281edd472.jpeg@s_0,w_660,h_370,q_80,f_webp",
  source_name: "å°äºæ­Œå”±",
  play_url:
    "http://vd2.bdstatic.com/mda-mjackqq9kjp5tdpi/cae_h264_nowatermark/1633943179857973669/mda-mjackqq9kjp5tdpi.mp4?v_from_s=hkapp-haokan-hbe",
  duration: "06:37",
  url: "https://haokan.hao123.com/v?vid=8094282426594482339&pd=&context=",
  show_tag: 0,
  publish_time: "2021 å¹´ 06 æœˆ 13 æ—¥",
  is_pay_column: 0,
  like: "163",
  comment: "41",
  playcnt: "3020",
  fmplaycnt: "3020 æ¬¡æ’­æ”¾",
  fmplaycnt_2: "3020",
  outstand_tag: "",
};
```

åªéœ€è¦æŠŠè¯¥æ•°æ®æŒ‡å®šåˆ° `vuex` çš„ `video` æ¨¡å—ä¸‹çš„ `videoData` ä¸­ï¼Œç„¶åæŒ‡å®š **ç¼–è¯‘æ¨¡å¼åˆ° `video-detail` å³å¯**

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-29-23-38-10.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/e1f1e9a)

8ï¼‰çƒ­æ’­è¯¦æƒ… - æ¸²æŸ“å…¨éƒ¨å¼¹å¹•æ¨¡å—

å¼¹å¹•çš„æ•°æ®ç›´æ¥ä½¿ç”¨ `getVideoDanmuList` çš„æ¥å£å³å¯ï¼Œå¦‚æœæƒ³è¦å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ `/video/comment/list` æ¥å£è·å–åˆ†é¡µçš„è¯„è®ºæ•°æ®

æä¾›äº†ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªæ˜¯è·å–å…¨éƒ¨å¼¹å¹•æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å…¨éƒ¨è¯„è®ºæ•°æ®ï¼ˆé€‰æ‹©è¿™ä¸ªï¼‰ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯åˆ†é¡µè·å–ï¼ˆç”¨äºç†Ÿæ‚‰ä¹‹å‰çš„åˆ†é¡µè¯„è®ºåŠŸèƒ½ï¼Œç”¨ä½œç»ƒä¹ ï¼‰

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-29-23-46-12.png)

> [Demo](https://github.com/ppambler/imooc-uni-app/commit/acbcf62)

ğŸ’¡ï¼šä½¿ç”¨ç»„ä»¶çš„æ„ä¹‰ï¼Ÿ

![æ„ä¹‰](assets/img/2021-12-29-23-47-53.png)

9ï¼‰çƒ­æ’­è¯¦æƒ… - æ¸²æŸ“åº•éƒ¨åŠŸèƒ½åŒº

