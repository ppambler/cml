### âœï¸ Tangxt â³ 2021-12-09 ğŸ·ï¸ å°ç¨‹åº

# 03-å°ç¨‹åºæ ¸å¿ƒè¯­æ³•

1ï¼‰å¼€ç¯‡ä»‹ç»

æœ¬ç« ä¼šè®²è§£å°ç¨‹åºé‡Œè¾¹æ‰€æœ‰çš„æ ¸å¿ƒè¯­æ³•ï¼Œä¸»è¦è®²çš„å†…å®¹ï¼Œåˆ†æˆäº†ä»¥ä¸‹ä¸‰å¤§å—ï¼š

![ä¸‰å—å†…å®¹](assets/img/2021-12-09-15-24-43.png)

- ç¬¬ä¸€å—ï¼šæ•°æ®é©±åŠ¨åŸåˆ™ -> ç°é˜¶æ®µå‰ç«¯å¼€å‘æˆ–è€…å¤§å‰ç«¯å¼€å‘çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯å°ç¨‹åºï¼Œè¿˜æ˜¯ä¸‰å¤§æ¡†æ¶ Vueã€Reactã€Angularï¼Œå®ƒä»¬éƒ½ç§‰æ‰¿äº†åŸºæœ¬çš„æ•°æ®é©±åŠ¨åŸåˆ™ -> è¿™ä¸€å—å¿…é¡»ä¼˜å…ˆæŒæ¡
- ç¬¬äºŒå—ï¼šé€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ä¸²è”æ•´ä¸ªç¬¬ä¸‰ç« ä¸­çš„æ‰€æœ‰æ ¸å¿ƒçŸ¥è¯†ç‚¹
  - æ¡ˆä¾‹ 1ï¼šå•†å“æ¡ˆä¾‹
  - æ¡ˆä¾‹ 2ï¼šåˆ—è¡¨æ¡ˆä¾‹

è¿™ä¸¤ä¸ªæ¡ˆä¾‹éƒ½ææ‡‚äº†ï¼Œæ„å‘³ç€ç¬¬ä¸‰ç« çš„å†…å®¹éƒ½æŒæ¡äº†

2ï¼‰å°ç¨‹åºçš„æ•°æ®é©±åŠ¨åŸåˆ™

> ç•Œé¢ä¾èµ–æ•°æ®ï¼Œæ•°æ®å˜åŒ–äº†ï¼Œç•Œé¢å“åº”å¼çš„æ›´æ–°

1ã€é—®é¢˜

> 1. ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ
> 2. åœ¨å°ç¨‹åºä¸­å¦‚ä½•å®Œæˆæ•°æ®ç»‘å®šï¼Ÿ

2ã€æ•°æ®é©±åŠ¨

```js
// å•†å“
let product = {
  price: 10,
  num: 5
}
// æ€»ä»·æ ¼
let total = 0;
// è®¡ç®—æ€»ä»·æ ¼çš„æ–¹æ³•
function getTotal(product) {
  return product.price * product.num
}
// è®¡ç®—å•†å“çš„æ€»ä»·æ ¼
total = getTotal(product)
// è¿›è¡Œæ‰“å°
console.log('æ€»ä»·æ ¼ï¼š' + total);
// 50 å¤ªè´µäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°‘è´­ä¹°äº†ä¸¤ä¸ªå•†å“ï¼Œä¹Ÿå°±æ˜¯è®© num = 3
product.num = 3;
// é—®ï¼šæ€»ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ
console.log('æ€»ä»·æ ¼ï¼š' + total); // æ­¤æ—¶ï¼Œæ‰“å°å‘ç°æ€»ä»·æ ¼è¿˜æ˜¯ 50 å…ƒï¼Œå¦‚æœè¦è¯´åŸå› çš„è¯ï¼Œé‚£ä¹ˆåº”è¯¥å¾ˆç®€å•ï¼Œã€å› ä¸ºæˆ‘ä»¬æ²¡æœ‰é‡æ–°è¿›è¡Œä»·æ ¼çš„è®¡ç®—å˜›ã€‘
// ä½†æ˜¯ï¼Œæ­¤æ—¶å¤§å®¶æœ‰æ²¡æœ‰æƒ³è¿‡ä¸€ç‚¹ï¼Ÿæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è¿›è¡Œä»·æ ¼çš„è®¡ç®—å‘¢ï¼Ÿ
// ----------------------------------------------------
// å½“å•†å“çš„æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå•†å“çš„æ€»ä»·æ ¼ã€ç†åº”å‘ç”Ÿå˜åŒ–ã€‘ï¼Œä¸æ˜¯å—ï¼Ÿ
```

ä¸Šé¢çš„ä¾‹å­ï¼Œå°±æ˜¯æˆ‘æƒ³è¦è·Ÿå¤§å®¶è¯´çš„ï¼šã€å½“æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå•†å“çš„æ€»ä»·æ ¼ç†åº”å‘ç”Ÿæ”¹å˜ã€‘ã€‚

é‚£ä¹ˆåŒæ ·çš„é“ç†ï¼Œåœ¨æˆ‘ä»¬çš„é¡µé¢ä¸­ï¼Œå‡å¦‚ï¼š

> æŸä¸€ä¸ª DOM ä¾èµ–äºæŸä¸ªæ•°æ®è¿›è¡Œå±•ç¤ºï¼Œé‚£ä¹ˆã€å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾ä¹Ÿç†åº”å‘ç”Ÿå˜åŒ–ã€‘ã€‚

è€Œè¿™ä¸ªå°±æ˜¯ã€å“åº”å¼æ•°æ®é©±åŠ¨ã€‘ã€‚

> PSï¼šå¦‚æœä½ æƒ³è¦æ›´æ·±å…¥çš„äº†è§£ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŸ¥çœ‹è¿™ç¯‡åšå®¢ï¼š[Vue 3 æ·±å…¥å“åº”å¼åŸç† - èŠä¸€èŠå“åº”å¼æ„å»ºçš„é‚£äº›ç»å†_æ…•è¯¾æ‰‹è®°](https://www.imooc.com/article/320582)

3ã€å°ç¨‹åºä¸­å®Œæˆå“åº”å¼

- åœ¨ `data` ä¸­å®šä¹‰æ•°æ®
  
  ![å®šä¹‰æ•°æ®](assets/img/2021-12-09-19-16-33.png)
  
- åœ¨ `wxml` ä¸­ä½¿ç”¨æ•°æ®
  
  ![ä½¿ç”¨æ•°æ®](assets/img/2021-12-09-19-17-53.png)
  

ç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥åœ¨ `js çš„ data` ä¸­å®šä¹‰æ•°æ®ï¼Œå¹¶ä¸”åœ¨ `wxml ä¸­é€šè¿‡ ğŸŸ¡ğŸŸ¡ğŸŸ¡ğŸŸ¡` è¯­æ³•ä½¿ç”¨æ•°æ®ã€‚

é‚£ä¹ˆæˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹æˆ‘ä»¬çš„é—®é¢˜ï¼š

4ã€ç­”æ¡ˆ

> 1. ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ
>    1. å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾ç†åº”å‘ç”Ÿå˜åŒ–
> 2. åœ¨å°ç¨‹åºä¸­å¦‚ä½•å®Œæˆæ•°æ®ç»‘å®šï¼Ÿ
>    1. åœ¨ `data` ä¸­å®šä¹‰æ•°æ®
>    2. åœ¨ `wxml` ä¸­é€šè¿‡ `ğŸŸ¡ğŸŸ¡ğŸŸ¡ğŸŸ¡` ä½¿ç”¨æ•°æ®

ä½†æ˜¯åœ¨æ­¤æ—¶ï¼Œå¤§å®¶å¿ƒé‡Œåº”è¯¥è¿˜æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œé‚£å°±æ˜¯ï¼šã€ç°åœ¨æ•°æ®è¿˜æ²¡æœ‰å‘ç”Ÿå˜åŒ–å‘€ï¼Ÿæˆ‘ä¹Ÿæ²¡æœ‰çœ‹åˆ°è§†å›¾çš„å˜åŒ–å‘€ï¼Ÿã€‘ã€‚

å¦‚æœä½ å¿ƒä¸­ç¡®å®æœ‰è¿™ä¹ˆä¸€ä¸ªå›°æƒ‘çš„è¯ï¼Œé‚£ä¹ˆå°±ç»§ç»­å¾€ä¸‹çœ‹ï¼

3ï¼‰å°ç¨‹åºçš„å¸¸ç”¨äº‹ä»¶ä¸å±æ€§åˆ—è¡¨

> `product.num`è¿™ä¸ª`.`æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦åŠ `''`

1ã€é—®é¢˜

> 1. å¦‚ä½•ä¸ºæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Ÿ
> 2. å¦‚ä½•ä¿®æ”¹ `data` ä¸­æ•°æ®çš„å€¼ï¼Ÿ

2ã€å¤„ç†ç‚¹å‡»äº‹ä»¶

æ¥ä¸‹æ¥æˆ‘ä»¬å¸Œæœ›åšä¸€ä»¶äº‹æƒ…ï¼š

> åˆ›å»ºä¸€ä¸ªæŒ‰é’®
>
> å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶
>
> è®© `product` çš„ `num` + 1

åˆ›å»ºæŒ‰é’®çš„æ–¹å¼éå¸¸ç®€å•ï¼š

``` html
<button type="primary">num + 1</button>
```

é—®é¢˜åœ¨äºï¼šæˆ‘ä»¬å¦‚ä½•ç»™è¿™ä¸ªæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶å‘¢ï¼Ÿ

æœ‰è¿‡å¼€å‘ç»éªŒçš„åŒå­¦ï¼Œå¯èƒ½ä¼šçŒœåˆ°ï¼šæˆ‘ä»¬å¯ä»¥ç»™ `button` ä¸€ä¸ª `click` äº‹ä»¶æ¥ç›‘å¬æŒ‰é’®çš„ç‚¹å‡»ã€‚

å¯æ˜¯å¤§å®¶éœ€è¦çŸ¥é“ï¼Œç°åœ¨æˆ‘ä»¬æ˜¯åœ¨ã€å°ç¨‹åºã€‘ä¸­ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è¦ç»™ `button` æ·»åŠ ç‚¹å‡»äº‹ä»¶çš„è¯ï¼Œæˆ‘ä»¬æ˜¯ä¸å¯ä»¥ä½¿ç”¨ `click`çš„ï¼Œè€Œæ˜¯ä½¿ç”¨**`bind:tap / bindtap`**ã€‚ï¼ˆæ¨èä½¿ç”¨`bindtap`ï¼‰

> `bind`æ˜¯ä¸ªå…³é”®å­—

å…¶ä¸­ `bind: / bind` è¡¨ç¤ºã€ç»‘å®šäº‹ä»¶ã€‘ï¼Œ`tap` ä¸ºç»‘å®šçš„å…·ä½“äº‹ä»¶ã€‚å°ç¨‹åºå…·ä½“äº‹ä»¶åˆ—è¡¨ï¼Œå¯ä»¥ç‚¹å‡» [è¿™é‡Œ](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html#%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F) æŸ¥çœ‹ã€‚

``` html
<button type="primary" bindtap="onAddNum">num + 1</button>
```

æ¥ä¸‹æ¥éœ€è¦åœ¨ `js` ä¸­å®šä¹‰å¯¹åº”çš„ **äº‹ä»¶**

```js
/**
* å®šä¹‰äº‹ä»¶å¤„ç†çš„æ–¹æ³•
*/
{
  onAddNum () {
    console.log('onAddNum')
  }
}
```

åˆ°ç›®å‰ï¼šæˆ‘ä»¬å·²ç» **ç›‘å¬äº†æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶ä¸”å†™å…¥äº†å¯¹åº”çš„å¤„ç†å‡½æ•°** ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦ **ä¿®æ”¹ `num` çš„å€¼**

![tap äº‹ä»¶](assets/img/2021-12-09-20-45-44.png)

3ã€ä¿®æ”¹ data çš„æ•°æ®ï¼š`setData`

æƒ³è¦ä¿®æ”¹ `data` ä¸­çš„æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ä¸ªå‡½æ•° `setData`ã€‚

`setData` æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æœ€æ–°çš„ `data` æ•°æ®ã€‚

å…¶ä¸­ `key` ä¸ºè¦ä¿®æ”¹çš„æ•°æ®ï¼Œ `value` ä¸ºå½“å‰`key`çš„æœ€æ–°å€¼

4ã€è®¿é—® data çš„æ•°æ®ï¼š`this.data`

å› ä¸ºæˆ‘ä»¬æƒ³è¦è®© `num + 1` ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æ‹¿åˆ° `num` çš„å½“å‰å€¼ï¼Œæƒ³è¦è®¿é—® `num` çš„å€¼ï¼Œå¯ä»¥é€šè¿‡ `this.data.product.num` çš„å½¢å¼è®¿é—®

æ‰€ä»¥æœ€ç»ˆçš„ä¿®æ”¹ `num` çš„ä»£ç ä¸ºï¼š

![num+1](assets/img/2021-12-09-20-54-09.png)

æ­¤æ—¶ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» `button` ï¼Œå¯ä»¥å‘ç°ï¼šã€å½“ `num` å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ€»ä»·æ ¼ä¹Ÿå‘ç”Ÿäº†å¯¹åº”çš„å˜åŒ–ã€‘

5ã€ç­”æ¡ˆ

> 1. å¦‚ä½•ä¸ºæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Ÿ
>    1. `bindtap` or `bind:tap`
> 2. å¦‚ä½•ä¿®æ”¹ data ä¸­æ•°æ®çš„å€¼ï¼Ÿ
>    1. é€šè¿‡ `this.setData({})` å®šä¹‰æ–°çš„å€¼
>    2. é€šè¿‡ `this.data` è®¿é—®å…·ä½“çš„å€¼

4ï¼‰å°ç¨‹åºçš„äº‹ä»¶ä¼ å‚

1ã€é—®é¢˜

> å¦‚æœæƒ³è¦åœ¨ã€ç‚¹å‡»äº‹ä»¶ä¸­ã€‘ä¼ é€’å‚æ•°ï¼Œé‚£ä¹ˆéœ€è¦æ€ä¹ˆåšï¼Ÿ

2ã€æ–°çš„éœ€æ±‚

ç°åœ¨è®©æˆ‘ä»¬æŠŠéœ€æ±‚å˜å¾—æ›´åŠ å¤æ‚ä¸€äº›ã€‚

> æˆ‘ä»¬å¸Œæœ› `onAddNum` æ–¹æ³•å¯ä»¥æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ¯æ¬¡ç‚¹å‡» `num` å¢åŠ çš„æ•°é‡ä¸ºä¼ å…¥çš„å‚æ•°

é‚£ä¹ˆå¦‚æœæƒ³è¦å®ç°è¿™ä¸ªéœ€æ±‚çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦æ¶‰åŠåˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šã€äº‹ä»¶ä¼ å‚ã€‘ã€‚

å¦‚æœå¤§å®¶æœ‰è¿‡å¼€å‘ç»éªŒçš„è¯ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„éœ€æ±‚ï¼Œé¡ºä¾¿å¯ä»¥å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š

![ä»£ç ](assets/img/2021-12-09-21-33-21.png)

å‡å¦‚æˆ‘ä»¬çœŸæŒ‰ç…§ä»¥ä¸Šä»£ç è¿›è¡Œå®ç°çš„è¯ï¼Œé‚£ä¹ˆ **ä½ åº”è¯¥ä¼šæ”¶åˆ°ä»¥ä¸‹å¦‚ä¸‹çš„è­¦å‘Šï¼š**

![è­¦å‘Š](assets/img/2021-12-09-21-34-09.png)

è¿™ä¸ªè­¦å‘Šçš„æ„æ€æ˜¯ï¼šæ²¡æœ‰ä¸€ä¸ªå«åš `onAddNumN(5)` çš„æ–¹æ³•ç”¨æ¥å¤„ç†å½“å‰çš„è¿™ä¸ª `tap` äº‹ä»¶ã€‚

ä¹Ÿå³æ˜¯è¯´ï¼š`onAddNumN(5)` ä¼šè¢«å½“åšä¸€ä¸ª **å®Œæ•´çš„æ–¹æ³•åå­—**ï¼Œè€Œä¸æ˜¯ æ–¹æ³•åä¸ºï¼š`onAddNumN`ï¼Œä¼ å…¥äº†å‚æ•°ä¸º `5` ï¼

é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³è¦ä¼ é€’å‚æ•°ï¼Œé‚£åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

> æ–‡æ¡£ï¼š[äº‹ä»¶ - å¾®ä¿¡å¼€æ”¾æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html#dataset)

åœ¨å°ç¨‹åºä¸­ï¼Œå¦‚æœæƒ³è¦ç»™ **ç‚¹å‡»äº‹ä»¶ä¼ é€’å‚æ•°çš„è¯ï¼Œ**é‚£ä¹ˆéœ€è¦å€ŸåŠ© **`event`å¯¹è±¡** å’Œ **`data-`å±æ€§** ï¼

å‚æ•°çš„ä¼ é€’åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š

1. å½¢å‚ -> èµ·åˆ°å½¢å‚åŠŸèƒ½çš„å°±æ˜¯`event`å¯¹è±¡ -> è¡¨ç¤ºå½“å‰å‡½æ•°æƒ³è¦æ¥æ”¶åˆ°çš„å‚æ•°
2. å®å‚ -> èµ·åˆ°å®å‚åŠŸèƒ½çš„å°±æ˜¯`data-`å±æ€§ -> è¡¨ç¤ºè°ƒç”¨å½“å‰å‡½æ•°å®é™…ä¼ é€’çš„å‚æ•°

3ã€å½¢å‚

é¦–å…ˆå…ˆæ¥çœ‹ **å½¢å‚**ï¼Œå¯¹äº **ç‚¹å‡»äº‹ä»¶çš„å›è°ƒæ–¹æ³•** è€Œè¨€ï¼Œé»˜è®¤ä¼šæ¥æ”¶ä¸€ä¸ªå‚æ•° **event ï¼ˆäº‹ä»¶å¯¹è±¡ï¼‰**ã€‚è¿™ä¸ª `event` å¯¹è±¡ä¸ºï¼š**å›è°ƒæ–¹æ³•çš„å”¯ä¸€å‚æ•°**

ä¹Ÿå°±æ˜¯è¯´å›è°ƒæ–¹æ³•åªæœ‰ä¸€ä¸ªå½¢å‚ï¼Œé‚£å°±æ˜¯`event`ï¼ˆå¯ç®€å†™æˆ`e`ï¼‰

``` js
{
  onAddNumN (e) {}
}
```

4ã€å®å‚

å¯¹äº **å°ç¨‹åº** ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¸º **å›è°ƒæ–¹æ³•ä¼ é€’å®å‚**ã€‚

è€Œæ˜¯éœ€è¦é€šè¿‡ï¼š**å±æ€§ç»‘å®šçš„å½¢å¼ï¼ŒæŠŠéœ€è¦ä¼ é€’çš„å‚æ•°ç»‘å®šåˆ° å½“å‰ `DOM` å…ƒç´ ä¸­**ï¼Œç»‘å®šæ•°æ®çš„å±æ€§éœ€è¦ä»¥ `data-` å¼€å¤´ã€‚è¯¥å±æ€§å¯ä»¥é€šè¿‡ `e.target.dataset` è¿›è¡Œè®¿é—®ã€‚

![event](assets/img/2021-12-09-22-12-18.png)

---

æœ€ç»ˆå®ç°ï¼š

![å®ç°](assets/img/2021-12-09-22-20-01.png)

5ã€ç­”æ¡ˆ

![ç­”æ¡ˆ](assets/img/2021-12-09-22-22-31.png)

5ï¼‰å®ç°ã€åŒå‘æ•°æ®ç»‘å®šã€‘

1ã€é—®é¢˜

> 1. ä»€ä¹ˆå«åšåŒå‘æ•°æ®ç»‘å®šï¼Ÿ
> 2. å°ç¨‹åºä¸­å¦‚ä½•å®ç°åŒå‘æ•°æ®ç»‘å®šï¼Ÿ

2ã€å®ç°åŒå‘æ•°æ®ç»‘å®š

ä¸Šä¸€ç« èŠ‚ä¸­æˆ‘ä»¬é€šè¿‡ã€äº‹ä»¶ä¼ å‚ã€‘å®ç°äº†ã€æ¯æ¬¡ç‚¹å‡» + 5ã€‘ çš„åŠŸèƒ½ï¼Œä½†æ˜¯è¿™æ ·çš„åŠŸèƒ½æœªå…è¿˜æ˜¯æœ‰äº›å¤ªå•è°ƒäº†ã€‚

æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å¸Œæœ›å®ç°ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼š

> åˆ›å»ºä¸€ä¸ªæ•°å­—è¾“å…¥æ¡†ï¼Œè¾“å…¥æ¡† ä¸ã€å•†å“æ•°é‡ã€‘å®Œæˆ ã€åŒå‘æ•°æ®ç»‘å®šã€‘ã€‚
>
> å³ï¼š
>
> 1. è¾“å…¥æ¡†å†…å®¹ï¼ˆè§†å›¾ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå•†å“æ•°é‡ï¼ˆæ•°æ®ï¼‰åŒæ­¥è·Ÿéšå˜åŒ–
> 2. å•†å“æ•°é‡ï¼ˆæ•°æ®ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¾“å…¥æ¡†å†…å®¹ï¼ˆè§†å›¾ï¼‰åŒæ­¥è·Ÿéšå˜åŒ–

é‚£ä¹ˆè¿™æ ·çš„åŠŸèƒ½æˆ‘ä»¬åº”è¯¥å¦‚ä½•å»å®ç°å‘¢ï¼Ÿ

---

å¦‚æœæƒ³è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å…ˆæŠŠè¿™ä¸ªåŠŸèƒ½è¿›è¡Œæ‹†è§£ï¼Œã€**æŠŠä¸€ä¸ªå¤æ‚çš„åŠŸèƒ½æ‹†è§£æˆå¤šä¸ªç®€å•çš„åŠŸèƒ½æˆ–è€…è¯´å¤šä¸ªå¯æ‰§è¡Œçš„æ­¥éª¤**ã€‘æ˜¯å®ç°ä¸€ä¸ªå¤æ‚é€»è¾‘çš„æ ‡å‡†æ–¹å¼ã€‚

é‚£ä¹ˆå¦‚ä½•è¿›è¡Œæ‹†è§£å‘¢ï¼Ÿ **å¤§å®¶å¯ä»¥å…ˆè¿›è¡Œä»¥ä¸‹æ€è€ƒï¼Œç„¶åå†ç»§ç»­å‘ä¸‹è¿›è¡Œå­¦ä¹ ï¼**

---

ä»¥ä¸ŠåŠŸèƒ½å¯æ‹†è§£æˆäº”ä¸ªæ­¥éª¤ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š

> 1. åˆ›å»ºä¸€ä¸ªã€æ•°å­—è¾“å…¥æ¡†ã€‘
> 2. è®¾ç½® ã€å•†å“æ•°é‡ã€‘ ä¸ºè¾“å…¥æ¡†çš„åˆå§‹å€¼
> 3. ç›‘å¬ç”¨æˆ·çš„è¾“å…¥è¡Œä¸º
> 4. è·å–ç”¨æˆ·è¾“å…¥çš„å€¼
> 5. èµ‹å€¼ç»™ã€å•†å“æ•°é‡ã€‘

æ ¹æ®è¿™å¯é‡åŒ–çš„æ­¥éª¤å»å®ç°æˆ‘ä»¬çš„åŠŸèƒ½

![åŠŸèƒ½å®ç°](assets/img/2021-12-09-23-12-21.png)

é¢˜å¤–è¯ï¼šæŸ¥çœ‹ä¸€ä¸ªç»„ä»¶æ–‡æ¡£ï¼ˆæƒ³è¦çœ‹çœ‹`input`ç»„ä»¶ç»™æˆ‘ä»¬æä¾›äº†å“ªäº›èƒ½åŠ›ï¼‰

![æ–‡æ¡£](assets/img/2021-12-09-23-13-38.png)

é‚£ä¹ˆç°åœ¨åŠŸèƒ½æˆ‘ä»¬å·²ç»å®ç°äº†ï¼Œé‚£ä¹ˆå¤§å®¶åœ¨å›å¿†ä¸€ä¸‹æˆ‘ä»¬çš„é—®é¢˜ï¼š

3ã€ç­”æ¡ˆ

ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š

![åŒå‘ç»‘å®š](assets/img/2021-12-09-23-16-45.png)

ç¬¬äºŒä¸ªé—®é¢˜ï¼š

![å®ç°åŒå‘ç»‘å®š](assets/img/2021-12-09-23-23-49.png)

6ï¼‰æ¡ä»¶æ¸²æŸ“

1ã€é—®é¢˜

> 1. v-if å’Œ hidden çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

2ã€æ¡ä»¶æ¸²æŸ“

ç°åœ¨ä½ å·²ç»ä¹°äº†å¾ˆå¤šçš„å•†å“äº†ï¼Œå¯æ˜¯å½“ä½ å‡ºå»ç»“è´¦çš„æ—¶å€™ï¼Œå”®è´§å‘˜å°å§å§å¯¹ä½ å‘å‡ºäº†ä¸€å£°æƒŠå‘¼ï¼š

> 1. å¦‚æœã€æ€»ä»·æ ¼ <= 100 ã€‘ï¼šhello å¸…å“¥
> 2. å¦‚æœã€æ€»ä»·æ ¼ > 100 && æ€»ä»·æ ¼ < 1000ã€‘ï¼šå“‡å“¦ æœ‰é’±äººå“¦
> 3. å¦‚æœã€æ€»ä»·æ ¼ >= 1000ã€‘ï¼šåœŸè±ª ä½ å¥½

å¦‚æœæƒ³è¦å®ç°è¿™ä¹ˆä¸€ä¸ªåŠŸèƒ½çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ã€æ¡ä»¶æ¸²æŸ“ã€‘çš„åŠŸèƒ½äº†ã€‚

å°ç¨‹åºä¸­æä¾›äº†ä¸¤ä¸ª API éƒ½å¯ä»¥å®ç°ã€æ¡ä»¶æ¸²æŸ“ã€‘çš„åŠŸèƒ½ï¼š

1. `wx:if ... wx:elif ... wx:else`
2. `hidden`

é‚£ä¹ˆä¸‹é¢æˆ‘ä»¬å°±åˆ†åˆ«ç”¨è¿™ä¸¤ä¸ªè¯­æ³•æ¥å®ç°ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½ï¼š

ç¬¬ä¸€ä¸ªï¼š

![wxif](assets/img/2021-12-10-10-20-31.png)

ç¬¬äºŒä¸ªï¼š

![hidden](assets/img/2021-12-10-10-24-44.png)

3ã€v-if vs hidden

> æœ‰ Vue å¼€å‘ç»éªŒï¼Œå¯ä»¥ç†è§£ä¸º `v-if`ï¼ˆé”€æ¯ã€é‡å»ºï¼‰ vs `v-show`ï¼ˆ`display`æ§åˆ¶ï¼‰

1. å½“`wx:if`æ¡ä»¶æ»¡è¶³åˆ™è¿›è¡Œæ¸²æŸ“ï¼Œå¦åˆ™ä¸æ¸²æŸ“
2. å½“`hidden`æ¡ä»¶æ»¡è¶³åˆ™éšè—ï¼Œå¦åˆ™ä¸éšè—

é‚£æˆ‘ä»¬åº”è¯¥åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨`wx:if`ï¼Œä½¿ç”¨`hidden`å‘¢ï¼Ÿ

ä¸€èˆ¬æ¥è¯´ï¼Œ`wx:if` æœ‰æ›´é«˜çš„åˆ‡æ¢æ¶ˆè€—è€Œ `hidden` æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“æ¶ˆè€—ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢çš„æƒ…æ™¯ä¸‹ï¼Œç”¨ `hidden` æ˜¯æ›´å¥½ï¼Œå¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶ä¸å¤§å¯èƒ½æ”¹å˜ï¼Œç”¨ `wx:if` æ˜¯æ›´å¥½çš„ã€‚

![å¯¹æ¯”](assets/img/2021-12-10-10-36-09.png)

æ‰€ä»¥ï¼Œé’ˆå¯¹å½“å‰ä¸šåŠ¡ï¼Œä½¿ç”¨ `hidden` æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼

4ã€ç­”æ¡ˆ

![é—®é¢˜ 1](assets/img/2021-12-10-10-50-18.png)

â¹ï¼š[å‰ç«¯ç­”ç–‘ - v-if é‡æ–°æ¸²æŸ“å¯¼è‡´çš„ Bug - SegmentFault æ€å¦](https://segmentfault.com/a/1190000022525432)

7ï¼‰åˆ—è¡¨æ¸²æŸ“

1ã€ä»€ä¹ˆæ˜¯åˆ—è¡¨æ¸²æŸ“ï¼Ÿ

![åˆ—è¡¨æ¸²æŸ“](assets/img/2021-12-10-11-39-06.png)

2ã€é—®é¢˜

> 1. ä½¿ç”¨ `wx:for` æ—¶ï¼Œå½“å‰é¡¹çš„ã€ä¸‹æ ‡å˜é‡åã€‘å’Œã€å½“å‰é¡¹å˜é‡åã€‘é»˜è®¤åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
> 2. `block` ç»„ä»¶æ˜¯å¦ä¼šè¢«æ¸²æŸ“ï¼Ÿ

`block`ç»„ä»¶åœ¨å¾ªç¯åˆ—è¡¨é‡Œè¾¹èµ·åˆ°äº†å•¥ä½œç”¨ï¼Ÿ

3ã€æ–°çš„éœ€æ±‚

> å¦‚æœæˆ‘ä»¬æœ‰ä¸€ç»„å•†å“ï¼Œå¹¶ä¸”å¸Œæœ›æŠŠè¿™ç»„å•†å“å…¨éƒ¨æ¸²æŸ“å‡ºæ¥çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åˆ°ã€åˆ—è¡¨æ¸²æŸ“ã€‘çš„åŠŸèƒ½ã€‚

å°ç¨‹åºä¸­ä¸ºæˆ‘ä»¬æä¾›äº† `v-for` æŒ‡ä»¤ï¼Œè®©æˆ‘ä»¬è¿›è¡Œã€åˆ—è¡¨æ¸²æŸ“ã€‘çš„å®ç°ã€‚

åŒæ—¶ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªï¼š**åŒ…è£¹æ€§è´¨çš„å®¹å™¨ `block` ç»„ä»¶**ï¼Œå½“æˆ‘ä»¬å»å¾ªç¯å¤šä¸ªå…ƒç´ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `block` è¿›è¡ŒåŒ…è£¹ï¼Œ`block` ç»„ä»¶åªèµ·åˆ°åŒ…è£¹å…¶ä»–ç»„ä»¶çš„ä½œç”¨ï¼Œæœ¬èº«å¹¶ä¸ä¼šè¿›è¡Œæ¸²æŸ“ã€‚

å®šä¹‰ä¸€ç»„æ•°æ®ï¼š

![ä¸€ç»„æ•°æ®](assets/img/2021-12-10-11-59-50.png)

æ¸²æŸ“è¿™ç»„æ•°æ®ï¼š

![æ¸²æŸ“æ•°æ®](assets/img/2021-12-10-12-01-41.png)

æ¸²æŸ“å‡ºæ¥çš„ç»“æ„ï¼š

![ç»“æ„](assets/img/2021-12-10-12-06-08.png)

å¯¹äºåˆ—è¡¨å¾ªç¯æ¸²æŸ“ï¼Œæˆ‘ä»¬éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹æ˜¯ï¼š

1. å¾ªç¯æ¸²æŸ“çš„åŸºæœ¬è¯­æ³•ï¼Œå³`wx:for`çš„è¯­æ³•
2. `block`ç»„ä»¶çš„ä½œç”¨
3. å¾ªç¯æ¸²æŸ“çš„é€»è¾‘ï¼Œå³å¾ªç¯æ¸²æŸ“`block`é‡Œè¾¹çš„å…ƒç´  -> æœ‰ 5 æ¡æ•°æ®ï¼Œå°±æ¸²æŸ“ 5 ä¸ª`view`ï¼Œæœ‰ 10 æ¡æ•°æ®ï¼Œå°±æ¸²æŸ“å‡º 10 ä¸ª`view`

4ã€ç­”æ¡ˆ

> 1. ä½¿ç”¨ `wx:for` æ—¶ï¼Œå½“å‰é¡¹çš„ã€ä¸‹æ ‡å˜é‡åã€‘å’Œã€å½“å‰é¡¹å˜é‡åã€‘é»˜è®¤åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
>    1. é»˜è®¤æ•°ç»„çš„å½“å‰é¡¹çš„ä¸‹æ ‡å˜é‡åé»˜è®¤ä¸º `index`
>    2. æ•°ç»„å½“å‰é¡¹çš„å˜é‡åé»˜è®¤ä¸º `item`
> 2. `block` ç»„ä»¶æ˜¯å¦ä¼šè¢«æ¸²æŸ“ï¼Ÿ
>    1. `block` åªæ˜¯ä¸€ä¸ªåŒ…è£¹æ€§è´¨çš„å®¹å™¨ï¼Œä¸ä¼šè¢«è§£ææ¸²æŸ“ã€‚

8ï¼‰é…ç½®æ–‡ä»¶è§£è¯»

> ç¬¬ä¸€ä¸ªå•†å“æ¡ˆä¾‹ï¼Œå·²ç»æå®šäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç¬¬äºŒä¸ªæ¡ˆä¾‹â€”â€”åˆ—è¡¨æ¡ˆä¾‹

æˆ‘ä»¬ä¹‹å‰äº†è§£è¿‡é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯è¿™äº›é…ç½®æ–‡ä»¶éƒ½æœ‰å•¥å±æ€§å‘¢ï¼Ÿä»¥åŠæ¯ä¸€ä¸ªé…ç½®å±æ€§éƒ½èƒ½é…ç½®å•¥å†…å®¹å‘¢ï¼Ÿ

![é…ç½®æ–‡ä»¶è§£è¯»](assets/img/2021-12-10-13-18-40.png)

æ–‡æ¡£ï¼š

1. `app.json` é…ç½®æ–‡ä»¶ï¼š<https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html>
   1. `pages` æ•°ç»„ï¼š<https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#pages>
      1. åˆ›å»º `list` é¡µé¢
   2. `window` å¯¹è±¡ï¼š<https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window>
   3. `tabbar` å¯¹è±¡ï¼š<https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#tabBar>
      1. `index` é¡µé¢
      2. `list` é¡µé¢
2. `é¡µé¢ã€‚json` é…ç½®æ–‡ä»¶ï¼š<https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html>

1ã€å…¨å±€é…ç½®ï¼ˆapp.json é…ç½®æ–‡ä»¶ï¼‰

è¯¥é…ç½®æ–‡ä»¶é‡Œè¾¹æœ‰å¾ˆå¤šå±æ€§ -> æŒ‘é€‰å…¶ä¸­ä¸‰ä¸ªé‡ç‚¹å±æ€§æ¥è¿›è¡Œé‡ç‚¹è®²è§£

![é…ç½®æ–‡ä»¶](assets/img/2021-12-10-13-22-21.png)

![ä¸‰ä¸ªå±æ€§](assets/img/2021-12-10-13-25-21.png)

ğŸ’¡ï¼š`pages`

> ç”¨äºæŒ‡å®šå°ç¨‹åºç”±å“ªäº›é¡µé¢ç»„æˆï¼Œæ¯ä¸€é¡¹éƒ½å¯¹åº”ä¸€ä¸ªé¡µé¢çš„ è·¯å¾„ï¼ˆå«æ–‡ä»¶åï¼‰ ä¿¡æ¯ã€‚æ–‡ä»¶åä¸éœ€è¦å†™æ–‡ä»¶åç¼€ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å»å¯»æ‰¾å¯¹åº”ä½ç½®çš„ `.json`, `.js`, `.wxml`, `.wxss` å››ä¸ªæ–‡ä»¶è¿›è¡Œå¤„ç†ã€‚

æˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªæ–°é¡µé¢ -> æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥æ³¨å†Œé¡µé¢

ç¬¬ä¸€ç§ï¼š

1. åˆ›å»ºä¸€ä¸ªæ‰¿è½½é¡µé¢çš„æ–‡ä»¶å¤¹
2. åˆ›å»ºé¡µé¢

![ç¬¬ä¸€ç§](assets/img/2021-12-10-14-11-26.png)

![ç¬¬ä¸€ç§](assets/img/2021-12-10-14-12-16.png)

ç¬¬äºŒç§ï¼š

è¿™ç§æ–¹å¼ç›¸å¯¹æ¥è¯´å°±æ¯”è¾ƒç®€å•äº†ï¼Œæˆ‘ä»¬ç›´æ¥ä¿®æ”¹`app.json`é‡Œè¾¹çš„è¿™ä¸ª`pages`èŠ‚ç‚¹çš„å†…å®¹å³å¯

![ç¬¬äºŒç§](assets/img/2021-12-10-14-15-25.png)

---

è¿™ç§ä¸¤ç§åˆ›å»ºé¡µé¢çš„æ–¹å¼éƒ½è¡Œï¼Œæ¨èä½¿ç”¨ç¬¬äºŒç§ï¼Œå› ä¸ºçœäº‹å„¿ï¼

ğŸ’¡ï¼š`window`

`window`æè¿°çš„æ˜¯ã€Œå…¨å±€çš„é»˜è®¤çª—å£è¡¨ç°ã€ -> ç”¨äºè®¾ç½®å°ç¨‹åºçš„çŠ¶æ€æ ã€å¯¼èˆªæ¡ã€æ ‡é¢˜ã€çª—å£èƒŒæ™¯è‰²ã€‚

è¯è¯´ï¼Œå•¥å«ã€Œå¯¼èˆªæ¡ã€æ ‡é¢˜ã€ï¼Ÿ

![å¯¼èˆªæ¡](assets/img/2021-12-10-14-23-03.png)

`navigationBar`è¿™å—ï¼š

![navigationBar](assets/img/2021-12-10-14-26-58.png)

`background`è¿™å—ï¼š

> é¡µé¢æœ‰ä¸‹æ‹‰åŠŸèƒ½æ‰ä¼šçœ‹åˆ°èƒŒæ™¯è‰²

![èƒŒæ™¯è‰²](assets/img/2021-12-10-14-32-44.png)

ğŸ’¡ï¼š`tabBar`

![tabBar](assets/img/2021-12-10-15-11-50.png)

`tabBar`ï¼šåº•éƒ¨ `tab` æ çš„è¡¨ç°

> å¦‚æœå°ç¨‹åºæ˜¯ä¸€ä¸ªå¤š tab åº”ç”¨ï¼ˆå®¢æˆ·ç«¯çª—å£çš„åº•éƒ¨æˆ–é¡¶éƒ¨æœ‰ tab æ å¯ä»¥åˆ‡æ¢é¡µé¢ï¼‰ï¼Œå¯ä»¥é€šè¿‡ tabBar é…ç½®é¡¹æŒ‡å®š tab æ çš„è¡¨ç°ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µé¢ã€‚

![tabBar](assets/img/2021-12-10-15-14-48.png)

è‡³å°‘æœ‰ä¸¤ä¸ª`tab`æ‰ä¼šæœ‰æ•ˆæœ -> æœ€å¤š 5 ä¸ª `tab`

![tabBar](assets/img/2021-12-10-15-28-51.png)

2ã€é¡µé¢é…ç½®

> æ¯ä¸€ä¸ªå°ç¨‹åºé¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨ `.json` æ–‡ä»¶æ¥å¯¹æœ¬é¡µé¢çš„çª—å£è¡¨ç°è¿›è¡Œé…ç½®ã€‚é¡µé¢ä¸­é…ç½®é¡¹åœ¨å½“å‰é¡µé¢ä¼šè¦†ç›– `app.json` çš„ `window` ä¸­ç›¸åŒçš„é…ç½®é¡¹ã€‚æ–‡ä»¶å†…å®¹ä¸ºä¸€ä¸ª JSON å¯¹è±¡

ä¸å…¨å±€é…ç½®æœ‰é‡å¤çš„å±æ€§ -> ä¸»è¦æ˜¯`window`è¿™å—

![é¡µé¢é…ç½®](assets/img/2021-12-10-15-39-34.png)

9ï¼‰æ•°æ®è¯·æ±‚

1ã€åœºæ™¯

å…ˆå»è¯•æƒ³ä¸€ä¸ªåœºæ™¯ï¼Œç°åœ¨ä½ æ˜¯ã€æ…•è¯¾ç½‘çš„å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆã€‘ï¼Œç„¶åä½ å¼€å‘äº†è¿™æ ·çš„ä¸€ä¸ªã€å°ç¨‹åºã€‘

![åœºæ™¯](assets/img/2021-12-10-16-32-40.png)

ç°åœ¨ç³»ç»Ÿå·²ç»ä¸Šçº¿äº†ã€‚

æœ‰ä¸€å¤©ï¼Œä½ æƒ³è¦ä¿®æ”¹é‡Œé¢çš„ä¸€å—æ•°æ®ï¼Œæ¯”å¦‚ï¼šæŠŠã€C è¯­è¨€ç³»ç»ŸåŒ–ç²¾è®²ã€‘æ”¹æˆã€C è¯­è¨€ç²¾è®²ã€‘ï¼Œé‚£ä¹ˆä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ

è®°ä½ï¼Œç°åœ¨ä½ çš„é¡¹ç›®å·²ç»å‘å¸ƒä¸Šçº¿äº†ï¼ä½ æƒ³è¦ä¿®æ”¹çº¿ä¸Šç‰ˆæœ¬çš„å†…å®¹ï¼Œé‚£ä¹ˆä½ æ€ä¹ˆåšå‘¢ï¼Ÿéš¾é“è¦ä¸ºäº†ä¿®æ”¹è¿™ä¸ªæ–‡å­—å‘å¸ƒä¸€ä¸ªæ–°çš„ç‰ˆæœ¬å—ï¼Ÿå¦‚æœä»¥åå†æœ‰äº†ç±»ä¼¼çš„æ–‡å­—ä¿®æ”¹å‘¢ï¼Ÿ

é‚£ä¹ˆæ­¤æ—¶é¢å¯¹è¿™æ ·çš„åœºæ™¯ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ°ã€æ•°æ®è¯·æ±‚ã€‘äº†ã€‚

2ã€é—®é¢˜

![é—®é¢˜](assets/img/2021-12-10-16-34-11.png)

3ã€wx.request

[wx.request](https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html) å‘èµ· HTTPS ç½‘ç»œè¯·æ±‚ï¼Œè¯·æ±‚çš„æ–¹å¼ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š

1. get è¯·æ±‚
2. post è¯·æ±‚

è¿™é‡Œå‡†å¤‡äº†ä¸¤ä¸ªæ•°æ®è¯·æ±‚æ¥å£ï¼Œå¯ä»¥ç”¨æ¥æµ‹è¯• [wx.request](https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html) çš„æ•°æ®è¯·æ±‚ï¼ˆè¯¦è§æ¥å£æ–‡æ¡£ï¼‰ï¼š

1. `/api/test/getList`
2. `/api/test/postData`

é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ ¹æ® [wx.request](https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html) æ¥å®Œæˆä¸€ä¸ªåŸºæœ¬çš„æ¥å£è¯·æ±‚

ğŸ’¡ï¼šæ¼”ç¤º `get` è¯·æ±‚

![get](assets/img/2021-12-10-17-29-27.png)

è¿™ä¸ªä»£ç çœ‹èµ·æ¥æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å´å¾—åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼Œè€Œè¦è§£å†³è¿™ä¸ªæŠ¥é”™é—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦æ˜ç¡®ä¸€ä¸ªé—®é¢˜ï¼š**å°ç¨‹åºä¸­çš„æ•°æ®è¯·æ±‚æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ**

1. åªèƒ½è¯·æ±‚ `HTTPS` ç±»å‹çš„æ¥å£
2. å¿…é¡»å°†æ¥å£çš„åŸŸåæ·»åŠ åˆ°ä¿¡ä»»åˆ—è¡¨ä¸­

**è§£å†³æ–¹æ¡ˆï¼š**

1. ç”Ÿäº§ç¯å¢ƒï¼ˆå…¼å®¹å¼€å‘ç¯å¢ƒï¼‰ï¼šå°†æƒ³è¦è¯·æ±‚çš„åŸŸååè®®ã€æ›´æ”¹ä¸º HTTPSã€‘å¹¶ã€æ·»åŠ åˆ°åŸŸåä¿¡ä»»åˆ—è¡¨ã€‘
2. å¼€å‘ç¯å¢ƒï¼šé€šè¿‡å‹¾é€‰ã€Œä¸æ ¡éªŒåˆæ³•åŸŸåâ€¦â€¦ã€
  
   ![åˆæ³•åŸŸå](assets/img/2021-12-10-17-31-46.png)
  

å†æ¬¡æµ‹è¯•ï¼š

å¯¹äºå¼€å‘ç¯å¢ƒçš„è®¾ç½®ï¼š

![æµ‹è¯•](assets/img/2021-12-10-17-33-33.png)

å¯¹äºç”Ÿäº§ç¯å¢ƒçš„è®¾ç½®ï¼š

![è®¾ç½®](assets/img/2021-12-10-17-46-14.png)

![è­¦å‘Š](assets/img/2021-12-10-17-48-10.png)

> æ³¨æ„ï¼šä¸€å®šè¦ä½¿ç”¨é…ç½®äº†åˆæ³•åŸŸåçš„ APPIDï¼Œå¦‚æœä½ ç”¨çš„æ˜¯æµ‹è¯• IDï¼Œæ˜¾ç„¶æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼

ğŸ’¡ï¼šæ¼”ç¤º `post` è¯·æ±‚

![post](assets/img/2021-12-10-17-55-37.png)

æ•ˆæœï¼š

![post](assets/img/2021-12-10-17-56-50.png)

---

è‡³æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡`wx.request`å‘èµ·äº†ä¸€ä¸ª`get`è¯·æ±‚å’Œä¸€ä¸ª`post`è¯·æ±‚ï¼Œå¯¹äºè¿™ä¸€å°èŠ‚ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ï¼š

- `wx.request`æ–¹æ³•çš„ä½œç”¨
- å°ç¨‹åºä¸­å…³äºè¯·æ±‚çš„é™åˆ¶ï¼Œå·²ç»å¯¹äºè¿™ä¸ªé™åˆ¶çš„è§£å†³æ–¹æ¡ˆ

![é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆ](assets/img/2021-12-10-18-00-23.png)

4ã€é¢˜å¤–è¯ï¼ˆæ‰©å±•å†…å®¹ï¼šé’ˆå¯¹æœ‰ web å‰ç«¯å¼€å‘ç»éªŒçš„åŒå­¦ï¼‰

1. **è·¨åŸŸé—®é¢˜ï¼š** è·¨åŸŸé—®é¢˜ä¸»è¦é’ˆå¯¹ **æµè§ˆå™¨** è€Œè¨€ï¼Œè€Œå°ç¨‹åºå®¿ä¸»ç¯å¢ƒä¸ºã€å¾®ä¿¡å°ç¨‹åºå®¢æˆ·ç«¯ã€‘ï¼Œæ‰€ä»¥å°ç¨‹åºä¸­ä¸å­˜åœ¨ã€è·¨åŸŸé—®é¢˜ã€‘
2. **`ajax` è¯·æ±‚ï¼š** `ajax` è¯·æ±‚ä¸»è¦ä¾èµ–äºæµè§ˆå™¨ç»™æˆ‘ä»¬æä¾›çš„ `XMLHttpRequest` å¯¹è±¡ï¼Œè€Œå°ç¨‹åºçš„å®¿ä¸»ç¯å¢ƒæ˜¯ã€å¾®ä¿¡å°ç¨‹åºå®¢æˆ·ç«¯ã€‘ï¼Œå®ƒæ˜¯æ²¡æœ‰`XMLHttpRequest`å¯¹è±¡çš„ï¼Œæ‰€ä»¥å°ç¨‹åºä¸­çš„ã€ç½‘ç»œè¯·æ±‚ã€‘**ä¸æ˜¯** `ajax` è¯·æ±‚

æ€»ä¹‹ï¼Œå°ç¨‹åºé‡Œè¾¹çš„ç½‘ç»œè¯·æ±‚å’Œ`ajax`è¯·æ±‚æ²¡æœ‰åŠæ¯›é’±å…³ç³»

5ã€ç­”æ¡ˆ

é—®é¢˜ 1ï¼š

![é—®é¢˜ 1](assets/img/2021-12-10-18-05-15.png)

![é—®é¢˜ 1](assets/img/2021-12-10-18-08-26.png)

é—®é¢˜ 2ï¼š

![é—®é¢˜ 2](assets/img/2021-12-10-18-09-28.png)

é—®é¢˜ 3ï¼š

![é—®é¢˜ 3](assets/img/2021-12-10-18-10-56.png)

---

è¿™ä¸€èŠ‚æˆ‘ä»¬å­¦ä¹ çš„æ˜¯å°ç¨‹åºä¸­å…³äºæ•°æ®è¯·æ±‚çš„ä¸€ä¸ªæ¦‚å¿µ

10ï¼‰å¼‚æ­¥ç¼–ç¨‹æ–°æ–¹æ¡ˆ - Promise

1ã€åœºæ™¯

é¦–å…ˆå…ˆå»å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼š

> ç›®å‰æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦ä½ æŒ‰ç…§ä»¥ä¸‹çš„é€»è¾‘å»è¿›è¡Œæ¥å£è¯·æ±‚ï¼š
>
> 1. å…ˆå»è¯·æ±‚æ¥å£ A
> 2. åœ¨æ¥å£ A è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ B
> 3. åœ¨æ¥å£ B è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ C
> 4. åœ¨æ¥å£ C è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ D

å¦‚æœæŒ‰ç…§ä¸Šä¸€å°èŠ‚å­¦ä¹ åˆ°çš„å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå¾—åˆ°ä»¥ä¸‹çš„ä»£ç ï¼š

![å›è°ƒåœ°ç‹±](assets/img/2021-12-11-14-54-36.png)

å¯¹äºè¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å®ç°äº†ï¼Œä½†æ˜¯åœ¨ä¸€äº›å¤§å‚é‡Œè¾¹æˆ‘ä»¬å®ç°åŠŸèƒ½æ˜¯æˆ‘ä»¬çš„æœ¬èŒéœ€æ±‚ -> å®ç°å‡ºè¿™ä¸ªåŠŸèƒ½æ²¡æœ‰ä»»ä½•å€¼å¾—éª„å‚²çš„åœ°æ–¹

åœ¨ç°åœ¨è¿™ä¸ª **é¢œå€¼å³æ­£ä¹‰** çš„ä¸–ç•Œé‡Œé¢ï¼Œæˆ‘ä»¬è¿™æ ·çš„ä»£ç ç»“æ„åº”è¯¥æ˜¯ **æ²¡æœ‰å‰é€”çš„**ï¼ˆé¢†å¯¼çœ‹åˆ°è¿™ä¸ªä»£ç ç»“æ„ï¼Œä¼šæ¯«ä¸çŠ¹è±«åœ°æŠŠå®ƒä»¬åˆ æ‰äº†ï¼‰ã€‚ å› ä¸ºå®ƒå¤ªä¸‘äº†ï¼Œå¹¶ä¸”å¤ªéš¾ä»¥é˜…è¯»äº†ã€‚

å‡æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦è¯·æ±‚ 10 ä¸ªæ¥å£çš„è¯ï¼Œé‚£ä¹ˆè¿™ä»£ç ä¼šå˜æˆä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ

æ‰€ä»¥åœ¨ç¼–ç¨‹åœˆé‡Œå¯¹è¿™æ ·çš„ä»£ç æœ‰ä¸€ä¸ªéå¸¸å­¦æœ¯çš„åå­—ï¼š**å›è°ƒåœ°ç‹±** -> å›è°ƒå‡½æ•°çš„å¤§é‡åµŒå¥—å¯¼è‡´å‡ºç° **å¤æ‚ä¸”éš¾ä»¥é˜…è¯»** çš„é€»è¾‘

å¯¹äºè¿™ä¸ªå›è°ƒåœ°ç‹±ä»£ç ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸å·¥ä½œä¸­æ˜¯ç»å¯¹ä¸èƒ½å‡ºç°çš„ï¼

æ‰€ä»¥ï¼Œé—®é¢˜æ¥äº† -> æ—¢ç„¶ä¸èƒ½å†™å›è°ƒåœ°ç‹±è¿™ç§ä»£ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥ç”¨ä»€ä¹ˆæ–¹å¼å»å®ç°æˆ‘ä»¬çš„éœ€æ±‚å‘¢ï¼Ÿ

2ã€é—®é¢˜

> 1. promise æ˜¯å¦‚ä½•è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜å‘¢ï¼Ÿ
> 2. Promise çš„çŠ¶æ€åˆ†ä¸ºå‡ ç§ï¼Œåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
> 3. å¦‚ä½•è®© Promise å˜æˆ **å·²å…‘ç°**ï¼ˆfulfilledï¼‰çš„çŠ¶æ€ï¼Œå¦‚ä½•æ¥æ”¶å·²å…‘ç°ï¼ˆfulfilledï¼‰çŠ¶æ€çš„ç»“æœ

3ã€å†…å®¹

> ç‚¹å‡» [Promise](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise) è¿›å…¥å®˜æ–¹æ–‡æ¡£

ä½¿ç”¨ Promise è¿›è¡Œå®šä¹‰æ¥å£ï¼š

Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆ ï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼ã€‚

å®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ `new` å…³é”®å­—æ¥æ„å»º Promise çš„å®ä¾‹ã€‚
 
åœ¨ Promise ä¸­ï¼Œåˆ†ä¸ºäº†ä¸‰ç§çŠ¶æ€ï¼š

1. å¾…å®šï¼ˆpendingï¼‰: åˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ã€‚
2. å·²å…‘ç°ï¼ˆfulfilledï¼‰: æ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚
3. å·²æ‹’ç»ï¼ˆrejectedï¼‰: æ„å‘³ç€æ“ä½œå¤±è´¥ã€‚

ä»£ç ï¼ˆä¿è¯è·ŸåŸæ¥çš„ä»£ç å¤„ç†é€»è¾‘ä¸€æ ·ï¼‰ï¼š

![ä»£ç ](assets/img/2021-12-11-15-20-36.png)

ç»™ Promise æ„é€ å‡½æ•°ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ¥æ”¶ä¸¤ä¸ªçŠ¶æ€ï¼Œç¬¬ä¸€ä¸ªæ˜¯`resolve`å›è°ƒå‡½æ•°ï¼Œå½“`resolve`è¢«è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ‡è®° Promise æ‰§è¡ŒæˆåŠŸäº†ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ‰¿è¯ºå·²å…‘ç°äº†ï¼Œåä¹‹ï¼Œå½“`reject`è¢«è°ƒç”¨ï¼Œé‚£å°±æ˜¯æ‰§è¡Œå¤±è´¥ï¼ŒPromise å®ä¾‹è¿›å…¥ä¸€ä¸ªæ‹’ç»çš„çŠ¶æ€ï¼

åœ¨`resolve`æˆ–`reject`è¿˜éƒ½æ²¡æœ‰å»è°ƒç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬çš„ Promise å®ä¾‹å¤„äºä¸€ä¸ªå¾…å®šçŠ¶æ€ï¼

åŒç†ï¼Œå…¶å®ƒ`B`ã€`C`ã€`D`å‡½æ•°ä¹Ÿæ˜¯å¦‚æ­¤â€¦â€¦

ğŸ’¡ï¼šä½¿ç”¨ Promise å®ä¾‹

![Promise](assets/img/2021-12-11-15-49-33.png)

æˆ‘ä»¬å¯ä»¥ç®€å†™æˆã€Œé“¾å¼è°ƒç”¨ã€ï¼š

![é“¾å¼è°ƒç”¨](assets/img/2021-12-11-15-53-58.png)

è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†æˆ‘ä»¬æœ€åˆçš„é‚£ä¸ªéœ€æ±‚äº†

**Promise ä¸ å›è°ƒåœ°ç‹±çš„ç»“æœä»£ç å¯¹æ¯”æˆªå›¾**

![å¯¹æ¯”](assets/img/2021-12-11-16-01-50.png)

4ã€ç­”æ¡ˆ

é—®é¢˜ 1ï¼š

![é—®é¢˜ 1](assets/img/2021-12-11-16-03-16.png)

é—®é¢˜ 2ï¼š

![é—®é¢˜ 2](assets/img/2021-12-11-16-05-17.png)

é—®é¢˜ 3ï¼š

![é—®é¢˜ 3](assets/img/2021-12-11-16-11-36.png)

æˆ–è®¸çœ‹åˆ°è¿™é‡Œä¹‹åï¼Œå¯èƒ½è¿˜ä¼šæœ‰å¾ˆå¤šåŒå­¦ **å……æ»¡ç–‘æƒ‘**ï¼Œ æ¯”å¦‚â€œ æˆ‘å¹¶ä¸æ„Ÿè§‰ `promise` çš„è¿™ç§æ–¹å¼æ›´åŠ ç®€å•å‘€ï¼Ÿ â€ï¼Œå¦‚æœä½ ç¡®å®æœ‰è¿™æ ·çš„ **ç–‘é—®** çš„è¯ï¼Œé‚£ä¹ˆä½ åº”è¯¥ç›¸ä¿¡è¿™æ ·çš„ç–‘é—®åœ¨ä¹‹å‰ä¹Ÿè¢«äººæå‡ºè¿‡ã€‚

é‚£ä¹ˆè¿™ä¸ªé—®é¢˜æ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿè¯·çœ‹ä¸‹ä¸€èŠ‚ **å¼‚æ­¥ç¼–ç¨‹å†å‡çº§ - async + await**

11ï¼‰å¼‚æ­¥ç¼–ç¨‹å†å‡çº§-async å’Œ await

1ã€åœºæ™¯

`Promise` çš„æ–¹æ¡ˆè§£å†³äº† **å›è°ƒåœ°ç‹±** çš„é—®é¢˜ï¼Œä½†æ˜¯ `Promise` åˆå¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ï¼š**å¤§é‡çš„é“¾å¼è°ƒç”¨ï¼Œè®©æˆ‘ä»¬çš„ä»£ç å˜å¾—åˆè‡­åˆé•¿ï¼**

æˆ‘ä»¬å›è¿‡å¤´çœ‹ä¸€ä¸‹ `promise` å’Œ **å›è°ƒåœ°ç‹±** ä¸¤ç§æ–¹æ¡ˆçš„ä»£ç å¯¹æ¯”ï¼š

![å¯¹æ¯”](assets/img/2021-12-11-16-01-50.png)

å¯ä»¥å‘ç°ï¼š**å›è°ƒåœ°ç‹± `12` è¡Œçš„ä»£ç **ï¼Œåœ¨ `promise` ä¸­è¶³è¶³èŠ±äº† `16` è¡Œæ‰è§£å†³ï¼Œä»£ç é‡è¶³è¶³å¤šäº† `30%`ã€‚

è¿™ç§ **â€œé€€æ­¥â€** æ˜¯ç»å¯¹ä¸å¯ä»¥è¢«æ¥å—çš„ã€‚é‚£ä¹ˆé’ˆå¯¹è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ°ä¸¤ä¸ªæ–°çš„å…³é”®å­— `async + await`ã€‚

2ã€é—®é¢˜

> 1. `async` å’Œ `await` çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
> 2. ä½¿ç”¨ `await` çš„æ³¨æ„äº‹é¡¹æ˜¯ä»€ä¹ˆï¼Ÿ

æ˜ç¡®è¿™ä¸¤ä¸ªé—®é¢˜åï¼Œæˆ‘ä»¬å°±æ¥å°±è§£å†³ Promise ç»™æˆ‘ä»¬æ‰€å¸¦æ¥çš„é—®é¢˜ï¼

3ã€å†…å®¹

> ç‚¹å‡» [async](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function)  + [await](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/await) è¿›å…¥å®˜æ–¹æ–‡æ¡£

å…ˆæ¥æ˜ç¡®ä¸€ä¸‹`async`å’Œ`await`çš„ä½œç”¨

- `async+await` å¿…é¡»é…åˆ `promise`ï¼ˆè¿™å°±æ˜¯å…ˆè®²`promise`çš„åŸå› ï¼‰ ä½¿ç”¨ï¼ŒåŒæ—¶`async`å’Œ`await`å¿…é¡»ä¸€èµ·ä½¿ç”¨
- `async+await` å¯ä»¥ç®€åŒ– `promise` çš„å¼‚æ­¥æ“ä½œï¼ŒæŠŠ`promise`çš„å¼‚æ­¥æ“ä½œå˜æˆã€ŒåŒæ­¥å†™æ³•ã€

è¯è¯´ï¼Œä»€ä¹ˆæ˜¯ã€ŒåŒæ­¥å†™æ³•ã€å‘¢ï¼Ÿ

è¿™å°±æ˜¯åŒæ­¥å†™æ³•ï¼š

``` js
console.log(1)
console.log(2)
console.log(3)
```

`async`å’Œ`await`çš„ä½œç”¨ï¼š

- `async`ï¼šæ ‡è®°ä¸€ä¸ªå‡½æ•°ä¸ºå¼‚æ­¥å‡½æ•°
- `await`ï¼šæ ‡è®°å½“å‰æ“ä½œä¸ºå¼‚æ­¥æ“ä½œï¼Œ`await` å…³é”®å­—åªèƒ½ä½¿ç”¨åœ¨è¢«ã€Œ`async` æ ‡è®°çš„å‡½æ•°ä¸­ã€

ä»£ç ï¼š

![ä»£ç ](assets/img/2021-12-11-18-00-00.png)

**ä¸‰ç§å®ç°æ–¹æ¡ˆæˆªå›¾å¯¹æ¯”ï¼š**

![å¯¹æ¯”](assets/img/2021-12-11-18-07-42.png)

`async+await`å°±æ˜¯æˆ‘ä»¬ç°é˜¶æ®µå¤„ç†å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ

4ã€ç­”æ¡ˆ

> 1. `async` å’Œ `await` çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
>    1. `async` å’Œ `await` å¯ä»¥ç®€åŒ–  `promise` æ“ä½œ
>    2. ä½¿ `promise` çš„å¼‚æ­¥æ“ä½œæ‹¥æœ‰ **åŒæ­¥å†™æ³•**
> 2. ä½¿ç”¨ `await` çš„æ³¨æ„äº‹é¡¹æ˜¯ä»€ä¹ˆï¼Ÿ
>    1. `await` å¿…é¡»åœ¨è¢« `async` æ ‡è®°çš„å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨

ğŸ‘‡ï¼šåœ¨å°ç¨‹åºä¸­ï¼Œä½¿ç”¨`async+await`è§£å†³æ•°æ®è¯·æ±‚å›è°ƒçš„é—®é¢˜

12ï¼‰å°ç¨‹åºä½¿ç”¨ promise è§£å†³å¼‚æ­¥ç¼–ç¨‹

1ã€åœºæ™¯

å›è¿‡å¤´æ¥æ¥çœ‹ã€å°ç¨‹åºçš„ä»£ç ã€‘ï¼ŒåŒæ—¶å›é¡¾ä¸€ä¸‹ä¹‹å‰æˆ‘ä»¬è§£å†³è¿‡çš„éœ€æ±‚ï¼š

> ç›®å‰æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦ä½ æŒ‰ç…§ä»¥ä¸‹çš„é€»è¾‘å»è¿›è¡Œæ¥å£è¯·æ±‚ï¼š
>
> 1. å…ˆå»è¯·æ±‚æ¥å£ A
> 2. åœ¨æ¥å£ A è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ B
> 3. åœ¨æ¥å£ B è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ C
> 4. åœ¨æ¥å£ C è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ D

è¿™æ˜¯æˆ‘ä»¬åœ¨å­¦ä¹  `promise` æ—¶æ‰€åˆ—ä¸¾çš„åœºæ™¯ï¼Œé‚£ä¹ˆè¿™ä¸ªåœºæ™¯åŒæ ·é€‚ç”¨äºã€å°ç¨‹åºã€‘ä¸­çš„ã€ç½‘ç»œè¯·æ±‚åœºæ™¯ã€‘ã€‚å¦‚æœæˆ‘ä»¬é€šè¿‡ `wx.request` å®ç°ä»¥ä¸Šéœ€æ±‚çš„è¯ï¼Œé‚£ä¹ˆä¼šå¾—åˆ°å¦‚ä¸‹ä»£ç ï¼š

![ä»£ç ](assets/img/2021-12-11-19-34-48.png)

å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªåˆè‡­åˆé•¿çš„ä»£ç â€¦â€¦

é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åšçš„å°±å¾ˆç®€å•äº†ï¼Œæˆ‘ä»¬è¦ **ä½¿ç”¨ async å’Œ await** ç®€åŒ–ä»¥ä¸Šæ“ä½œã€‚

2ã€é—®é¢˜

> 1. å¦‚ä½•ä½¿ `wx.request` é…åˆ `async` å’Œ `await` ä½¿ç”¨ï¼Ÿ

3ã€å†…å®¹

> ä¸å†™`method`ï¼Œé»˜è®¤å°±æ˜¯`GET`è¯·æ±‚

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š

ä½¿ç”¨`async+await`å®Œæˆéœ€æ±‚ï¼š

> 1. å…ˆå»è¯·æ±‚æ¥å£ A
> 2. åœ¨æ¥å£ A è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ B
> 3. åœ¨æ¥å£ B è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ C
> 4. åœ¨æ¥å£ C è·å–åˆ°æ•°æ®ä¹‹åï¼Œå†å»è¯·æ±‚æ¥å£ D

å¦‚æœè¦è¾¾åˆ°æˆ‘ä»¬çš„ç›®æ ‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åˆ†æˆä¸¤æ­¥æ¥å»æ“ä½œï¼š

1. è·å–åˆ° `promise` å®ä¾‹å¯¹è±¡
2. ä½¿ç”¨ `async` å’Œ `await` ç®€åŒ– `promise` çš„æ“ä½œ

ğŸ’¡ï¼šè·å–åˆ° `promise` å®ä¾‹å¯¹è±¡

å› ä¸ºå°ç¨‹åºä¸­çš„ `wx.request` ä¸æ”¯æŒ `promise` åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ï¼š**ä½¿ç”¨ `promise` å°è£… `wx.request` è¯·æ±‚**

![pA](assets/img/2021-12-11-20-05-07.png)

ğŸ’¡ï¼šä½¿ç”¨`async+await`ç®€åŒ–`promise`æ“ä½œ

![async](assets/img/2021-12-11-20-09-41.png)

---

![ç‚¹å‡»æŒ‰é’®](assets/img/2021-12-11-20-20-58.png)

![æŠ¥é”™](assets/img/2021-12-11-20-15-54.png)

ç‚¹å‡»æŒ‰é’®ï¼Œå‘èµ·è¯·æ±‚ï¼Œç»“æœæ§åˆ¶å°æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ -> é”™è¯¯åŸå› ï¼šå°ç¨‹åºé»˜è®¤ä¸æ”¯æŒ`async+await`

å¦‚ä½•è§£å†³è¿™ä¸ªé”™è¯¯ï¼Ÿ -> ç‚¹å¼€ã€Œè¯¦æƒ…ã€ -> ã€Œä¸è¦å‹¾é€‰ ES6 è½¬ ES5ã€ï¼ˆæˆ‘è¿™é‡Œæ˜¯ã€ŒJS è½¬ ES5ã€ï¼‰

å†æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œå‘èµ·è¯·æ±‚ï¼š

![å‘é€è¯·æ±‚](assets/img/2021-12-11-20-13-10.png)

4ã€é—®é¢˜

![é—®é¢˜](assets/img/2021-12-11-20-18-44.png)

æ³¨æ„ï¼šä¸è¦å‹¾é€‰ã€ŒES6 è½¬ ES5ã€

13ï¼‰å°ç¨‹åºé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ

åˆ°ç°åœ¨ä¸ºæ­¢æˆ‘ä»¬å·²ç»å­¦ä¹ äº†éå¸¸å¤šçš„å°ç¨‹åºæ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å»å®ç°ä¸€ä¸ªå°çš„æ¡ˆä¾‹äº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¼€å¤´è¯´åˆ°çš„ç¬¬äºŒä¸ªæ¡ˆä¾‹ï¼

1ã€éœ€æ±‚

é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±å…ˆå»å®ç°è¿™ä¸ªæ¡ˆä¾‹çš„ç¬¬ä¸€ä¸ªåŠŸèƒ½ï¼š

> æˆ‘ä»¬å¸Œæœ› **é¡µé¢å‡ºç°ä¹‹åï¼Œå¯ä»¥ç›´æ¥è·å–æ¥å£æ•°æ®ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“**

å¯¹äºè¿™æ ·çš„ä¸€ä¸ªç®€å•éœ€æ±‚ï¼Œæ ¹æ®æˆ‘ä»¬ç°åœ¨æ‰€å­¦åˆ°çš„çŸ¥è¯†æ˜¯ï¼š**æ²¡æœ‰åŠæ³•å®ç°çš„**ã€‚ -> æˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯é€šè¿‡ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œç„¶åæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç„¶åå‘èµ·è¯·æ±‚è·å–æ¥å£æ•°æ®

å¦‚æœæƒ³è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå°±éœ€è¦æŒæ¡ **é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ**

2ã€é—®é¢˜

> 1. ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Ÿ
> 2. `onReady`  çš„è°ƒç”¨æ—¶æœºæ˜¯ä»€ä¹ˆï¼Ÿ

3ã€å†…å®¹

ğŸ’¡ï¼šä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿ

å¯¹äºã€Œç”Ÿå‘½å‘¨æœŸã€è¿™ä¸ªæ¦‚å¿µï¼Œå¦‚æœä½ æœ‰è¿‡å¼€å‘ç»éªŒï¼Œé‚£ä¹ˆä½ æ˜¾ç„¶å¯¹å®ƒå¹¶ä¸æ„Ÿåˆ°é™Œç”Ÿ

å°ç¨‹åºé‡Œè¾¹å…³äºã€Œç”Ÿå‘½å‘¨æœŸã€è¿™ä¸ªæ¦‚å¿µï¼Œè·Ÿ Vueã€Reactã€Angular è¿™ç§æ¡†æ¶é‡Œè¾¹æ‰€æåˆ°çš„ã€Œç”Ÿå‘½å‘¨æœŸã€æ¦‚å¿µï¼Œæ²¡æœ‰ä»€ä¹ˆæœ¬è´¨ä¸Šçš„åŒºåˆ«

æ‰€ä»¥ï¼Œå°ç¨‹åºé‡Œè¾¹çš„ã€Œç”Ÿå‘½å‘¨æœŸã€åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

æƒ³è¦å­¦ä¹ ã€å°ç¨‹åºã€‘çš„ç”Ÿå‘½å‘¨æœŸï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»è¦å…ˆææ¸…æ¥šï¼Œä»€ä¹ˆæ˜¯ã€ç”Ÿå‘½å‘¨æœŸã€‘

æ‰€è°“ **ç”Ÿå‘½å‘¨æœŸ** å°±æ˜¯ï¼šä¸€ä»¶äº‹ç‰©ç”± **åˆ›å»º** åˆ° **é”€æ¯** çš„å…¨éƒ¨è¿‡ç¨‹ã€‚

å¦‚ä¸€ä¸ªäººç”±å‡ºç”Ÿåˆ°æ­»äº¡çš„å…¨éƒ¨è¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºæ˜¯è¿™ä¸ªäººçš„ç”Ÿå‘½å‘¨æœŸ -> åœ¨è¿™ä¸ªäººæ‰€æ´»çš„ä¸€ç”Ÿä¹‹ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šé‡è¦çš„æ—¶åˆ»ï¼Œæ¯”å¦‚è€ƒä¸Šå¤§å­¦ã€ç»“å©šã€ç”Ÿå­ -> æ¯ä¸€ä¸ªé‡è¦æ—¶åˆ»å°±æ˜¯è¿™ä¸ªç”Ÿå‘½å‘¨æœŸçš„å‡½æ•°

![ç”Ÿå‘½å‘¨æœŸ](assets/img/2021-12-11-21-32-16.png)

> åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šæœ‰å¾ˆå¤š **â€ å…³é”®çš„æ—¶åˆ» â€œ**ï¼Œè¿™äº›å…³é”®çš„æ—¶åˆ»å°±æ˜¯ **ç”Ÿå‘½å‘¨æœŸå‡½æ•°**

ç”Ÿå‘½å‘¨æœŸå‡½æ•°å®ƒè¡¨ç¤ºçš„æ˜¯ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€äº›ã€Œå…³é”®çš„æ—¶åˆ»ã€

è€Œåœ¨å°ç¨‹åºä¹‹ä¸­ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µä¹Ÿæ˜¯å¦‚æ­¤ï¼

åœ¨ã€å°ç¨‹åºã€‘ä¸­ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š

1. **é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ**ï¼ˆæœ¬ç« èŠ‚å†…å®¹ï¼‰
2. **ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ**ï¼ˆåç»­ç« èŠ‚è®²è§£ï¼‰

![ç”Ÿå‘½å‘¨æœŸ](assets/img/2021-12-11-21-34-37.png)

ğŸ’¡ï¼šé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ

åˆ›å»ºä¸€ä¸ªæ–°é¡µé¢`lifecycle`ï¼Œåœ¨æ–°åˆ›å»ºçš„é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨ `js` æ–‡ä»¶ä¸­å·²ç»é»˜è®¤ç”Ÿæˆäº†å¾ˆå¤šçš„ä»£ç ï¼š

``` js
// pages/lifecycle/lifecycle.js
Page({

  /**
   * é¡µé¢çš„åˆå§‹æ•°æ®
   */
  data: {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   */
  onLoad: function (options) {
    console.log('onLoad')
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ
   */
  onReady: function () {
    console.log('onReady')
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º
   */
  onShow: function () {
    console.log('onShow')
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè—
   */
  onHide: function () {
    console.log('onHide')
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½
   */
  onUnload: function () {
    console.log('onUnload')
  },

  /**
   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ
   */
  onPullDownRefresh: function () {

  },

  /**
   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
   */
  onReachBottom: function () {

  },

  /**
   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«
   */
  onShareAppMessage: function () {

  }
})
```

åœ¨è¿™äº›ä»£ç ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ **ç”Ÿå‘½å‘¨æœŸå‡½æ•°--xxx** ç›¸å…³çš„å†…å®¹ã€‚

è¿™ 5 ä¸ªå‡½æ•°ï¼Œå°±æ˜¯ ã€å°ç¨‹åºä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‘ï¼Œæˆ‘ä»¬æŠŠé¼ æ ‡æ”¾å…¥åˆ°ã€å‡½æ•°ä¸Šã€‘ï¼Œé‚£ä¹ˆã€å°ç¨‹åºå¼€å‘å·¥å…·ã€‘ä¼šæç¤ºå‡ºå¯¹åº”çš„ã€å‡½æ•°è§£é‡Šã€‘ã€‚

ğŸ’¡ï¼šé»˜è®¤å¯åŠ¨é¡µé¢è®¾ç½®

![å¯åŠ¨é¡µé¢](assets/img/2021-12-11-23-14-23.png)

é»˜è®¤æ˜¯æ™®é€šç¼–è¯‘æ¨¡å¼ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ç¼–è¯‘æ¨¡å¼ï¼è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡åœ¨é‡æ–°ç¼–è¯‘åï¼Œå†é‡æ–°ç‚¹å‡» list tab åˆ‡æ¢åˆ°åˆ—è¡¨é¡µäº†ï¼

---

![ä¸‰ä¸ªå‡½æ•°](assets/img/2021-12-11-23-22-11.png)

è¿™ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯æˆ‘ä»¬é¡µé¢ä»æ— åˆ°æœ‰çš„ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåº

é™¤äº†è¿™ä¸¤ä¸ªä»¥å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªï¼š

- `onHide`ï¼šç›‘å¬é¡µé¢éšè—
- `onUnload`ï¼šç›‘å¬é¡µé¢å¸è½½

å¦‚ä½•è§¦å‘é¡µé¢éšè—ï¼Ÿ

![onHide](assets/img/2021-12-11-23-27-03.png)

å¦‚ä½•è§¦å‘é¡µé¢å¸è½½ï¼Ÿ

ç›®å‰ï¼Œæˆ‘ä»¬æ²¡åŠæ³•æ‰§è¡Œè¿™ä¸ª`onUnload`å‡½æ•°ï¼Œå› ä¸º`redirectTo`å’Œ`navigateBack`ï¼Œæˆ‘ä»¬è¿˜æœªå­¦åˆ°ï¼

![onUnload](assets/img/2021-12-11-23-36-10.png)

è¯è¯´ï¼Œè¿™ä¸ªé¡µé¢é‡Œçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æˆ‘ä»¬å…¨éƒ¨éƒ½éœ€è¦æŒæ¡å—ï¼Ÿ

**è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸éœ€è¦å…¨éƒ¨æŒæ¡**ï¼Œå¯¹äºå°ç¨‹åºä¸­çš„é¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°è€Œè¨€ï¼Œæˆ‘ä»¬åªéœ€è¦ç€é‡æŒæ¡å…¶ä¸­ä¸¤ä¸ªå°±å¯ä»¥ï¼š

1. `onLoad`ï¼šæœ€å…ˆè¢«è°ƒç”¨ï¼Œå¯ä»¥ç”¨æ¥ã€æ¥æ”¶åˆ«çš„é¡µé¢ä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‘ã€‚åœ¨åé¢çš„ã€é¡µé¢è·³è½¬ï¼ˆä¼ å‚ï¼‰ã€‘ä¸­ä¼šå†å»è¿›è¡Œè®²è§£ã€‚
2. `onReady`ï¼šé¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆåè°ƒç”¨ã€‚æˆ‘ä»¬å¯ä»¥ **åœ¨è¿™é‡Œä»æœåŠ¡ç«¯è·å–æ•°æ®** 

é‚£ä¹ˆçŸ¥é“äº†è¿™ä¸ªä¹‹åï¼Œå›åˆ°æˆ‘ä»¬æœ€åˆçš„éœ€æ±‚ä¸Šï¼Œæˆ‘ä»¬å¸Œæœ› **é¡µé¢å‡ºç°ä¹‹åï¼Œå¯ä»¥è·å–æ¥å£æ•°æ®ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“**ã€‚ é‚£ä¹ˆæ€ä¹ˆå»è¿›è¡Œå®ç°å‘¢ï¼Ÿ

å¾ˆç®€å•ï¼**åªéœ€è¦åœ¨ `onReady` ä¸­è°ƒç”¨è·å–æ¥å£æ•°æ®çš„æ–¹æ³•å°±å¯ä»¥äº†**ã€‚

é‚£ä¹ˆç°åœ¨ **æˆ‘ä»¬å·²ç»åœ¨é¡µé¢å‡ºç°ä¹‹åï¼Œè·å–åˆ°äº†æ¥å£çš„æ•°æ®**ï¼š

![è·å–æ•°æ®](assets/img/2021-12-11-23-50-37.png)

![æ•°æ®](assets/img/2021-12-11-23-52-22.png)

æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦æ ¹æ®æ•°æ®å®Œæˆé¡µé¢çš„æ¸²æŸ“å°±å¯ä»¥äº†

å¾ªç¯æ¸²æŸ“åˆ—è¡¨æ•°æ®ï¼š

1. å£°æ˜ä¸€ä¸ª`listData`ï¼ŒæŠŠè¯·æ±‚å¾—åˆ°çš„æ•°æ®èµ‹å€¼ç»™å®ƒ
2. åœ¨`wxml`é‡Œè¾¹ï¼Œé€šè¿‡`wx:for`å¾ªç¯æ¸²æŸ“è¿™ä¸ªåˆ—è¡¨æ•°æ®

å› ä¸ºæ•°æ®æ¯”è¾ƒå¤šäº†ï¼Œæœ‰ 33 æ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨äº†`scroll-view(scroll-y)`åŒ…è£¹ä¸€ä¸‹å®ƒ

ç¬¬ä¸€æ­¥ï¼š

![ç¬¬ä¸€æ­¥](assets/img/2021-12-12-00-08-22.png)

ç¬¬äºŒæ­¥ï¼š

![ç¬¬äºŒæ­¥](assets/img/2021-12-12-00-10-03.png)

4ã€ç­”æ¡ˆ

é—®é¢˜ 1ï¼š

![é—®é¢˜ 1](assets/img/2021-12-12-00-12-51.png)

é—®é¢˜ 2ï¼š

![é—®é¢˜ 2](assets/img/2021-12-12-00-13-23.png)

---

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å°ç¨‹åºä¸­é¡µé¢ç”Ÿå‘½å‘¨æœŸçš„å­¦ä¹ ï¼Œä¹Ÿå®ç°äº†æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªéœ€æ±‚

14ï¼‰PullToRefresh ä¸‹æ‹‰åˆ·æ–°ä¸ä¸Šæ‹‰åŠ è½½

1ã€åœºæ™¯

ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº† **åˆ—è¡¨é¡µé¢çš„ä¸€ä¸ªæœ€åŸºç¡€çš„ä¸€ä¸ªæ¸²æŸ“**ï¼Œä½†æ˜¯è¿™æ ·è¿˜æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚

å› ä¸ºåœ¨æˆ‘ä»¬æœ€ç»ˆçš„æˆå‹é¡¹ç›®ä¸­ï¼Œ **æ•°æ®åˆ—è¡¨æ˜¯éœ€è¦åˆ†é¡µè¿›è¡Œå±•ç¤ºçš„**ã€‚

æ‰€è°“åˆ†é¡µå°±æ˜¯ï¼š**å½“åˆ—è¡¨ä¸­æ•°æ®è¿‡å¤šæ—¶ï¼Œä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„æ•°æ®å›å¯¼è‡´è¯·æ±‚è¿‡æ…¢ï¼Œæ‰€ä»¥å‰ç«¯å°±ä¼šé€šè¿‡åˆ†é¡µæ¥åŠ è½½æ•°æ®ã€‚** -> åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœä½ é‡åˆ°äº†ä¸€ä¸ªåˆ—è¡¨ä¹‹ä¸­æ•°æ®é‡éå¸¸å¤§çš„æƒ…å†µï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥è€ƒè™‘è¿›è¡Œåˆ†é¡µè¯·æ±‚äº†

è¿™ç§åˆ†é¡µçš„æ–¹å¼åœ¨ç§»åŠ¨ç«¯é¡¹ç›®ä¸Šéƒ½æœ‰å¤§é‡çš„ä½“ç°ï¼Œæ¯”å¦‚ ã€ä»Šæ—¥å¤´æ¡ã€‘ã€ã€æ·˜å®ã€‘ã€ã€å¾®ä¿¡çš„èŠå¤©è®°å½•ã€‘ç­‰ç­‰å¾ˆå¤šã€‚ -> å‡ ä¹æ‰€æœ‰çš„åº”ç”¨éƒ½ä¼šå®ç°ã€Œåˆ†é¡µã€è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚

![åˆ†é¡µ](assets/img/2021-12-12-16-16-51.png)

é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨å½“å‰é¡¹ç›®ä¸­å®ç°ã€åˆ†é¡µè¯·æ±‚ã€‘åŠŸèƒ½ï¼Œå°±éœ€è¦å€ŸåŠ©ã€ä¸‹æ‹‰åˆ·æ–°ä¸ä¸Šæ‹‰åŠ è½½ã€‘çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ `pullToRefresh`

2ã€é—®é¢˜

![é—®é¢˜](assets/img/2021-12-12-16-21-38.png)

ğŸ‘‡ï¼šå®ç°ä¸Šæ‹‰åŠ è½½å’Œä¸‹æ‹‰åˆ·æ–° -> è¯´ç™½äº†å°±æ˜¯å®ç°åˆ†é¡µè¯·æ±‚

3ã€å†…å®¹

æ•´ä¸ªã€åˆ†é¡µåŠ è½½ã€‘åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š

1. ä¸Šæ‹‰åŠ è½½
2. ä¸‹æ‹‰åˆ·æ–°

è¿™ä¸¤éƒ¨åˆ†éœ€è¦åˆ†åˆ«æ¥è¿›è¡Œå¤„ç†ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ã€ä¸Šæ‹‰åŠ è½½ã€‘

ğŸ’¡ï¼šä¸Šæ‹‰åŠ è½½

åœ¨ ã€å°ç¨‹åºã€‘ä¸­ï¼Œé»˜è®¤å·²ç»å®ç°äº†ã€ä¸Šæ‹‰åŠ è½½ã€‘çš„åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç›‘å¬ `onReachBottom` å‡½æ•°ï¼Œæ¥ç›‘å¬ï¼š**é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶**ã€‚å½“é¡µé¢æ»‘åŠ¨åˆ°åº•éƒ¨æ—¶ï¼Œä¼šè§¦å‘ `onReachBottom` å‡½æ•°ã€‚

![è§¦å‘ onReachBottom](assets/img/2021-12-12-16-32-15.png)

æ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“äº†è¿™ä¸ª`onReachBottom`å‡½æ•°çš„è°ƒç”¨æ—¶æœºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å®ƒæ¥å®ç°æˆ‘ä»¬çš„ã€Œä¸Šæ‹‰åŠ è½½ã€åŠŸèƒ½äº†ï¼

å¦‚ä½•å®ç°ï¼Ÿ

1. å¯¹å½“å‰æ•°æ®è¿›è¡Œåˆ†é¡µ -> æä¾›çš„è¿™ä¸ªæ¥å£é»˜è®¤æ”¯æŒåˆ†é¡µæ“ä½œ -> `page`è¡¨ç¤ºå½“å‰é¡µæ•°ï¼Œ`size`è¡¨ç¤ºæ¯é¡µæœ‰å¤šå°‘æ¡æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯æ•°æ®é‡ï¼‰ -> å‡è®¾æœ‰ 100 æ¡æ•°æ®ï¼Œç¬¬ä¸€é¡µå°±æ˜¯æœ‰ 10 æ¡æ•°æ®ï¼Œç¬¬äºŒé¡µä¹Ÿæ˜¯ 10 æ¡æ•°æ®â€¦â€¦
2. ä¿®æ”¹åŸå…ˆçš„è¯·æ±‚ä»£ç  -> è¿™ä¸€æ¬¡éœ€è¦å¸¦å‚æ•°äº† -> æ·»åŠ ä¸€ä¸ª`data`å±æ€§å³å¯
3. `onReachBottom`çš„å¤„ç†ï¼Œä¹Ÿå°±æ˜¯ã€Œä¸Šæ‹‰åŠ è½½ã€çš„å®ç°ï¼š
   1. ä¿®æ”¹`page`
   2. è·å–æœ€æ–°æ•°æ®
   3. æ–°è·å–åˆ°çš„æ•°æ®è¡¥å……åˆ°ç°æœ‰æ•°æ®çš„åé¢

---

åœ¨ã€ç”¨æˆ·ä¸Šæ‹‰ã€‘æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›è·å–ã€ä¸‹ä¸€é¡µã€‘çš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å½“å‰çš„æ•°æ®è¿›è¡Œåˆ†é¡µï¼š

![æ•°æ®åˆ†é¡µ](assets/img/2021-12-12-16-49-01.png)

ç„¶åã€å½“é¡µé¢è¿›å…¥æ—¶ã€‘ï¼Œæˆ‘ä»¬è·å–ç¬¬ä¸€é¡µçš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ä»£ç è¿›è¡Œä¸€ä¸‹ä¿®æ”¹ï¼š

![è·å–ç¬¬ä¸€é¡µæ•°æ®](assets/img/2021-12-12-16-50-16.png)

> `https://api.imooc-blog.lgdsunday.club/api/test/getList?page=1&size=10`

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-12-16-52-14.png)

ç„¶ååœ¨ã€ä¸Šæ‹‰æ“ä½œã€‘æ—¶ï¼ŒæŒç»­è¿›è¡Œåç»­çš„æ•°æ®è¯·æ±‚ï¼š

![åç»­è¯·æ±‚](assets/img/2021-12-12-16-55-14.png)

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-12-16-56-36.png)

ç›®å‰è¿™ä¸ªä»£ç æ˜¯é—®é¢˜çš„ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å·²ç»æ‹‰åˆ°åº•äº†ï¼Œåˆå¾€ä¸‹æ»‘ï¼Œä¹Ÿå°±æ˜¯é¡µé¢å¾€ä¸Šèµ°ï¼Œç„¶åæˆ‘ä»¬åˆæ‹‰åˆ°åº•ï¼Œè¿™æ ·å¾€è¿”å‡ æ¬¡çš„è¯ï¼Œ`onReachBottom`ä¹Ÿä¼šä¸åœåœ°è§¦å‘ï¼š

![æ€§èƒ½](assets/img/2021-12-12-17-00-57.png)

è¿™ç§æ“ä½œæ˜¾ç„¶æ˜¯ä¸å¯¹çš„ -> å› ä¸ºè¿™æ˜¯å¹³ç™½æ— æ•…çš„æµªè´¹æˆ‘ä»¬æœåŠ¡å™¨çš„æ€§èƒ½

æ‰€ä»¥ï¼Œå¦‚ä½•è§£å†³è¿™æ ·ä¸€ä¸ªé—®é¢˜å‘¢ï¼Ÿ

æ–°çš„éœ€æ±‚ï¼š

> å½“å·²ç»æ²¡æœ‰æ–°æ•°æ®ä¹‹åï¼Œå°±ä¸è¦å†å‘èµ·æ•°æ®è¯·æ±‚äº†ï¼Œè€Œä¸”è¿˜è¦ç»™ç”¨æˆ·ä¸€ä¸ªæç¤º -> è¯´ç™½äº†ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­æ˜¯å¦å·²ç»æ²¡æœ‰æ–°æ•°æ®äº†

æ¥å£ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª`total`æ•°æ®ï¼Œæˆ‘ä»¬åˆ©ç”¨è¿™ä¸ª`total`æ¥åˆ¤æ–­

![ä»£ç ](assets/img/2021-12-12-17-16-23.png)

æ ·å¼å’Œç»“æ„ï¼š

![æ ·å¼å’Œç»“æ„](assets/img/2021-12-12-17-17-33.png)

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-12-12-17-18-49.png)

é‚£ä¹ˆåˆ°ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ã€ä¸Šæ‹‰åŠ è½½ã€‘çš„æ“ä½œï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬è¿˜ç¼ºå°‘ä¸€ä¸ªã€ä¸‹æ‹‰åˆ·æ–°ã€‘çš„æ“ä½œï¼

ğŸ’¡ï¼šä¸‹æ‹‰åˆ·æ–°

æƒ³è¦åœ¨ã€å°ç¨‹åºã€‘ä¸­å®ç°ã€ä¸‹æ‹‰åˆ·æ–°ã€‘ï¼Ÿè¿™ä¸åŒäºä¸Šæ‹‰åŠ è½½ï¼Œè¿™éœ€è¦**é¦–å…ˆå¼€å¯**ã€ä¸‹æ‹‰åˆ·æ–°ã€‘ï¼š

``` json
{
  "usingComponents": {},
  "backgroundColor": "#cccccc",
  "enablePullDownRefresh": true
}
```

å½“æˆ‘ä»¬å¼€å¯äº†ã€ä¸‹æ‹‰åˆ·æ–°ã€‘ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å»ç›‘å¬ `onPullDownRefresh` å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨ï¼š**ç”¨æˆ·ä¸‹æ‹‰åˆ·æ–°æ—¶è¿›è¡Œå›è°ƒ**

![ä¸‹æ‹‰åˆ·æ–°](assets/img/2021-12-12-17-25-38.png)

åœ¨æ­¤å›è°ƒä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œçš„æ“ä½œå°±éå¸¸ç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ï¼š**é‡ç½®é¡µæ•°ï¼Œè·å–æœ€æ–°çš„æ•°æ®ï¼Œä½¿ç”¨æ–°æ•°æ®è¦†ç›–æ—§æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯é‡ç½®æ•°æ®æºï¼‰ï¼Œå…³é—­ä¸‹æ‹‰åŠ¨ç”»ï¼ˆåœ¨çœŸæœºä¸­ï¼Œä¸‹æ‹‰åˆ·æ–°çš„åŠ¨ä½œæ˜¯ä¸ä¼šè‡ªåŠ¨å…³é—­çš„ï¼‰** å°±å¯ä»¥äº†ï¼š

> æ˜ç¡®æ­¥éª¤åï¼ˆä¸Šè¾¹çš„é«˜äº®å°±æ˜¯æ­¥éª¤ï¼‰ï¼Œæ‰å»å®ç°åŠŸèƒ½

![ä¸‹æ‹‰åŠ è½½](assets/img/2021-12-12-17-36-06.png)

> å¾®ä¿¡æœ‹å‹åœˆ -> é¡µé¢é¡¶éƒ¨æ˜¯æœ€æ–°æ•°æ®ï¼Œä¸‹æ‹‰åŠ è½½ä¸€ä¸‹ï¼Œç›¸å½“äºåˆ·æ–°é¡µé¢äº†

4ã€ç­”æ¡ˆ

> 1. å¦‚ä½•å¼€å¯ä¸‹æ‹‰åˆ·æ–°
>    1. å¯¹ **é¡µé¢å¯¹åº”çš„ `json` æ–‡ä»¶** ä¸­é€šè¿‡ `"enablePullDownRefresh": true` å¼€å¯
> 2. åœ¨ `onPullDownRefresh` ä¸­ï¼Œä¸€èˆ¬è¿›è¡Œä»€ä¹ˆæ“ä½œ -> åœ¨ä¸‹æ‹‰åˆ·æ–°äº‹ä»¶çš„å›è°ƒå¤„ç†å‡½æ•°ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šï¼š
>    1. é‡ç½®é¡µæ•°
>    2. é‡ç½®æ•°æ®æº
>    3. å…³é—­ä¸‹æ‹‰åŠ¨ç”»
> 3. åœ¨ `onReachBottom` ä¸­ï¼Œä¸€èˆ¬è¿›è¡Œä»€ä¹ˆæ“ä½œ -> åœ¨ä¸Šæ‹‰åŠ è½½äº‹ä»¶çš„å›è°ƒå¤„ç†å‡½æ•°ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šï¼š
>    1. åˆ¤æ–­æ•°æ®æ˜¯å¦å·²ç»åŠ è½½å®Œæˆ
>    2. è‡ªå¢é¡µæ•°
>    3. ç´¯åŠ æ•°æ®

ä»¥ä¸Šå°±æ˜¯å…³äºã€ŒPullToRefreshã€çš„æ‰€æœ‰æ“ä½œäº†ï¼

> [stackjie/vue-pull-to: âš¡ï¸  A pull-down refresh and pull-up load more and infinite scroll component for Vue.js --Vue ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶](https://github.com/stackjie/vue-pull-to)

15ï¼‰å°ç¨‹åºçš„é¡µé¢è·³è½¬


