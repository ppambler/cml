### ✍️ Tangxt ⏳ 2022-03-03 🏷️ 小程序

# 03-HYMusic 状态管理⽅案

1）掌握 Video 详情页-获取网络数据

💡：MV 详情页如何做？

![MV](assets/img/2022-03-03-14-18-07.png)

💡：定义三个获取数据的函数

![请求函数](assets/img/2022-03-03-18-03-20.png)

> 注意 JS Doc

💡：发送网络请求获取三个数据

![获取数据](assets/img/2022-03-03-18-00-56.png)

改成这样的：

![数据](assets/img/2022-03-03-18-08-20.png)

优化一下代码：

![优化代码](assets/img/2022-03-03-18-17-08.png)

> 可以用 `Promise.all`？ -> 可以，不过需要等数据都拿到才可以赋值，而这样并不好，我们要的是，哪个请求先结束那就先赋值呗！

关于那个`id`，如果很多地方都要用的话，那你就放到`data`里边

> 在我看来这代码是有 bug 的，你在做其它逻辑的时候，网络请求的数据还未赋值给`data`啊

2）掌握 Video 详情页-播放视频和页面布局

💡：讲什么？

![内容](assets/img/2022-03-03-18-56-31.png)

只讲视频播放，其它的自己做，毕竟这其它的是很简单的！有那么多的时间，还不如多讲点其它的内容！ -> 把时间放在功能身上

💡：video

audio 组件不维护了，现在用 video 了

video 组件，自带进度条等控制栏，不需要我们去开发！ -> 如果你对控制了不满意，那么你可以自行去开发！ -> 这是`controls`属性

video 组件提供了很多属性？ -> 意味着提供了很多功能，我们应该感到高兴，很多时候，我们要用这个功能，只需要添加一个属性就可以了（属性多越简单），如果一个组件提供的属性很少，很多时候，就需要我们自己去实现功能了！

> 模拟器无法全屏显示，你可以选择真机调试，在手机全屏查看

video 默认有宽高！

你想要弹幕？ -> 有规范 -> 必须告诉 video 组件在多少秒的时候展示哪条弹幕，当然还可以添加颜色

💡：视频固定，内容滚动

![滚动](assets/img/2022-03-03-19-12-03.png)

讲两种做法：

1. 使用`fixed`
2. 使用`scroll-view` -> 比较麻烦需要动态计算高度，毕竟不同机型页面高度可能是不一样的

![滚动](assets/img/2022-03-03-19-23-26.png)

3）

> 人具有超越性 -> 其动力来自于自我否定 -> 这意味着进步 -> webstorm 大，收费 这是否定它，用 VS Code 不适应，用久了适应，这就是进步，超越了自我

💡：做什么？

![设计稿](assets/img/2022-03-16-16-59-31.png)

> 这个设计稿不是最终的成品，这里边有一些细节需要完善、优化，比如轮播图这块的图片显示不全，推荐歌单这块的每个 item 需要有一些偏移

💡：vant-weapp

> [youzan/vant-weapp: 轻量、可靠的小程序 UI 组件库](https://github.com/youzan/vant-weapp)

公司用得比较多

💡：如何引入 vant-weapp？

使用`npm` -> 早期小程序不支持使用`npm`引入第三方库，而现在是支持的

定位到项目根目录：

``` bash
npm init -y
```

![npm init](assets/img/2022-03-16-17-46-48.png)

安装：

``` bash
npm i @vant/weapp
```

![安装](assets/img/2022-03-16-18-25-13.png)

在`node_modules`目录里边可以看到安装的第三方库：

![第三方库](assets/img/2022-03-16-18-26-25.png)

本地有了这个库后，我们还不可以使用它

想要使用它，你还得这样：

![使用 npm 包](assets/img/2022-03-16-18-29-32.png)

当然，这样还不够，你还得把这个 `npm` 包转化成小程序能够使用的形式

![构建 npm](assets/img/2022-03-16-18-33-22.png)


