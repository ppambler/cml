### âœï¸ Tangxt â³ 2022-04-23 ðŸ·ï¸ å°ç¨‹åº

# 10-æ’­æ”¾å™¨æ­Œè¯è§£æžã€å±•ç¤ºã€æ»šåŠ¨å®žçŽ°

1ï¼‰ç­”ç–‘

ðŸ’¡ï¼šå†™ä»£ç å¾ˆçº ç»“ï¼Ÿ

è¿™æ˜¯å¥½äº‹ -> å½“ä½ å¯¹æ‰€å†™çš„ä»£ç æœ‰è¦æ±‚çš„æ—¶å€™ï¼Œä½ æ‰ä¼šçº ç»“ -> æ¯”å¦‚èµ·åå­—æ—¶ä¼šæƒ³å¾ˆå¤š

ðŸ’¡ï¼šIndexDB å¼€å‘ç”¨å¾—å¤šå—ï¼Ÿ

ç”¨å¾—ä¸å¤š -> ä¸€èˆ¬éƒ½æ˜¯ç”¨æ•°æ®åº“äº†

ðŸ’¡ï¼šç®€åŽ†é¡¹ç›®æ˜¯æŒ‘éƒ¨åˆ†è¯¦ç»†å†™è¿˜æ˜¯å¤§ä½“æ€»ç»“çš„å¥½ï¼Ÿ

å¤šå†™ä¸€äº›æ¯”è¾ƒå¥½ï¼

å½“ç„¶ï¼Œå¯¹äºŽä¸€äº›å¤§ä½¬è€Œè¨€ï¼Œå¦‚ python ä½œè€…ï¼Œç®€åŽ†é‡Œè¾¹åªå†™äº†ä¸€å¥ã€ŒI write pythonã€å°±è¡Œäº†

ç”¨æœ€ç®€å•çš„è¯ï¼Œè¯´æœ€ç‹ çš„è¯ -> åˆ°äº†è¿™ç§å¢ƒç•Œçš„äººï¼Œä¸éœ€è¦ç”¨å¤ªå¤šè¯æ¥æè¿°ï¼Œç®€ç®€å•å•å°±èƒ½æŠŠè‡ªå·±çš„èƒ½åŠ›ä½“çŽ°å‡ºæ¥ï¼

ðŸ’¡ï¼šmv ç•Œé¢çš„è®¾è®¡ç¨¿ï¼Ÿ

æ‰‹æœºç«¯ -> ç½‘æ˜“äº‘éŸ³ä¹å’ŒæŠ–éŸ³çš„çœ‹èµ·æ¥å·®ä¸å¤šï¼

2ï¼‰æŽŒæ¡æ’­æ”¾é¡µ-æ­Œè¯åˆ†é¡µçš„å±•ç¤ºå’Œæ»šåŠ¨

ðŸ’¡ï¼šåšä»€ä¹ˆï¼Ÿ

åšä¸‰ä¸ªä¸œè¥¿ï¼š

1. åˆ‡æ¢åˆ°ã€Œæ­Œè¯ã€é¡µï¼Œå¯ä»¥å±•ç¤ºæ­Œè¯ï¼Œå¹¶ä¸”æ»šåŠ¨æ­Œè¯
2. é‡æž„ä»£ç  -> æ’­æ”¾é¡µé‡Œè¾¹çš„ä¸€äº›æ•°æ®éœ€è¦å…±äº«å‡ºåŽ» -> å…¶å®ƒé¡µé¢è¦æ’­æ”¾æ­Œæ›²ï¼Œé‚£å°±å¾ˆå®¹æ˜“åšåˆ°äº†
3. æ’­æ”¾é¡µçš„æ“ä½œéƒ¨åˆ† -> æ’­æ”¾æ¨¡å¼ã€ä¸Šä¸€é¦–ã€æš‚åœã€ä¸‹ä¸€é¦–ã€æ­Œæ›²åˆ—è¡¨å±•ç¤º

ðŸ’¡ï¼šæŠŠæ­Œè¯å±•ç¤ºåˆ°è¿™ä¸ªã€Œæ­Œè¯ã€é¡µ

![å±•ç¤ºæ­Œè¯](assets/img/2022-04-25-17-47-52.png)

ðŸ’¡ï¼šæ­Œè¯æ ·å¼

1. ä¸èƒ½ç»™æ•´ä¸ª`scroll-view`ä¸Šä¸‹`padding` -> ä¸ç„¶ï¼Œåœ¨æ»šåŠ¨çš„æ—¶å€™ï¼Œä¸Šä¸‹æ­Œè¯ä¼šæ¶ˆå¤±æŽ‰
   1. ç»™ç¬¬ä¸€å¥æ­Œè¯å’Œæœ€åŽä¸€å¥æ­Œè¯åŠ `padding-top/bottom` -> ä½œç”¨äºŽ`item`
   2. ç¬¬ä¸€å¥æ­Œè¯æ‰€å¤„çš„ä½ç½®åœ¨ä¸­é—´ -> é€šè¿‡`contentHeight`è®¡ç®—å¯å¾— -> å¯æ˜¯è¿™æ˜¯ä»Žè¿™ä¸­é—´å¼€å§‹çš„ï¼Œå¤ªé ä¸­äº†ï¼Œæ‰€ä»¥å†æä¸Šä¸ª`80` -> é€‚é…é»„é‡‘åˆ†å‰²ç‚¹
2. åŠ¨ç”»æ•ˆæžœ
   1. ä¸€è¡Œæ­Œè¯çš„é«˜åº¦è®¾ç½®æˆäº†`35px`ï¼Œåœ¨ç§»åŠ¨ç«¯è®¾å¤‡è¿™æ˜¯æ¯”è¾ƒèˆ’é€‚çš„é«˜åº¦ï¼Œå±…ä¸­æ•ˆæžœå¾ˆå¥½ -> å› æ­¤ï¼Œæˆ‘ä»¬çš„æ»šåŠ¨è·ç¦»ä¹Ÿæ˜¯`35px`
   2. åœ¨ CSS é‡Œè¾¹å†™äº†`35px` -> ä½ å¯ä»¥è®¾ç½®æˆå¸¸é‡ -> ç”¨è¡Œå†…æ ·å¼
   3. å‡ºçŽ°æ»šåŠ¨ -> ç”¨`scroll-top` -> ä¸è¿‡è¿™æ ·çš„æ»šåŠ¨å¾ˆçªå…€ï¼Œæœ‰è·³è·ƒçš„æ„Ÿè§‰ -> åŠ ç‚¹åŠ¨ç”»æ•ˆæžœ

---

æ•ˆæžœï¼š

![æ•ˆæžœ](assets/img/2022-04-25-18-36-08.png)

> [Demo](https://github.com/ppambler/QQMusic/commit/8d963c0)

3ï¼‰ç­”ç–‘

> 1 59 32

ðŸ’¡ï¼šæ­Œè¯å±•ç¤ºçš„ç©ºç™½ï¼Ÿ

é‚£ä¸ªç©ºç™½ä¹Ÿæ˜¯æœ‰æ—¶é—´çš„

ðŸ’¡ï¼šæ­Œè¯æ‹–æ‹½æ’­æ”¾ï¼Ÿ

1. ä½ å¯ä»¥æ ¹æ®`scrollTop`é™¤ä»¥`35`è®¡ç®—å¾—åˆ°`index`
2. æ ¹æ®`index`æ‹¿åˆ°å¯¹åº”çš„æ—¶é—´ï¼Œå†è®¾ç½®ï¼ˆ`seek`ï¼‰å¯¹åº”çš„æ—¶é—´

âž¹ï¼š[å‰ç«¯æœ‰ä»€ä¹ˆæ‹–åŠ¨æ­Œè¯æ”¹å˜æ’­æ”¾è¿›åº¦çš„å¼€æºé¡¹ç›®ï¼Ÿ - SegmentFault æ€å¦](https://segmentfault.com/q/1010000022232384)

ðŸ’¡ï¼šæ­Œè¯å‰åŽé«˜åº¦ç”¨å¦ä¸€ç§æ–¹å¼è®¡ç®—

çˆ¶ç›’å­çš„ä¼ªç±»ç»™`calc(50% +/- è¡Œé«˜ï¼‰`

4ï¼‰æŽŒæ¡æ’­æ”¾é¡µ-çŠ¶æ€ç®¡ç†çš„ store é€»è¾‘æŠ½å–

ðŸ’¡ï¼šé‡æž„æ’­æ”¾é¡µé¢ä»£ç 

ä¼šä¿®æ”¹å¾ˆå¤šä»£ç ï¼Œç”šè‡³åˆ æŽ‰ä¸€äº›ä»£ç 

ç›®å‰çš„ä»£ç å­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Ÿ

![é—®é¢˜](assets/img/2022-04-26-19-30-02.png)

æ€Žä¹ˆé‡æž„ï¼Ÿ

æŠŠæ•°æ®çš„åŽŸå§‹ä½ç½®æ”¾åˆ°å…¶å®ƒåœ°æ–¹ï¼Œç›®å‰è¿˜åœ¨è¿™ä¸ªæ’­æ”¾é¡µé‡Œè¾¹ï¼Œæ’­æ”¾é¡µåªæœ‰ä½¿ç”¨æƒ

ðŸ’¡ï¼šå¯¼å‡ºä»£ç 

![å¯¼å‡º](assets/img/2022-04-26-20-05-03.png)

ðŸ’¡ï¼šé‡æž„æ­¥éª¤

1. æŠ½ç¦»ç½‘ç»œè¯·æ±‚è¿‡æ¥çš„æ•°æ® -> å¦‚`currentSongã€durationTimeã€lyricInfos` -> `id`
2. åœ¨å“ªé‡Œå‘èµ·ç½‘ç»œè¯·æ±‚ï¼Ÿ -> `song-item-v1`ã€`song-item-v2`

> [Demo](https://github.com/ppambler/QQMusic/commit/18a8d2a)

---

æŠ½å–ä»£ç çš„æ€è·¯ï¼š

1. åˆ†æžæ¸…æ¥šå“ªäº›çŠ¶æ€éœ€è¦å…±äº«ï¼Œå“ªäº›ä¸œè¥¿éœ€è¦æŠ½ç¦»å‡ºåŽ»
2. æŒ‰ç…§ç¬¬ä¸€æ­¥è¿™ä¸ªé€»è¾‘ï¼Œä¸€ç‚¹ä¸€ç‚¹åœ°æŠ½ç¦»å‡ºåŽ»

ä¸ºä»€ä¹ˆä¸ä¸€å¼€å§‹å°±æŠ½ç¦»äº†ï¼Ÿ -> å…ˆæŠŠé€»è¾‘éƒ½å†™åˆ°æ’­æ”¾é¡µé‡Œè¾¹ï¼Œå†æŠ½å– -> æ˜¯ä¸ºäº†è®©å¤§å®¶å­¦ä¼šè¿™æ ·æŠ½å–çš„æ€è·¯

5ï¼‰æŽŒæ¡æ’­æ”¾é¡µ-æ’­æ”¾åŠŸèƒ½çš„æŠ½å–å’Œè¿”å›žåŠŸèƒ½

> 1 23 35

ðŸ’¡ï¼šç½‘ç»œè¯·æ±‚è¿™éƒ¨åˆ†æŠ½å–å®Œäº†ï¼ŒæŠ½ç¦»æ’­æ”¾æ­Œæ›²éƒ¨åˆ†

ä¸ºä»€ä¹ˆè¦æŠ½å–ï¼š

![æŠ½å–ä»£ç ](assets/img/2022-04-28-18-22-56.png)

æŠ½åˆ°å“ªå„¿åŽ»ï¼š

![æŠ½ä»£ç ](assets/img/2022-04-28-18-26-32.png)

ðŸ’¡ï¼šæ’­æ”¾é¡µ -> è¿”å›žåˆ°ä¸Šä¸€é¡µ

ç›‘å¬çš„æ˜¯æ•´å—åŒºåŸŸï¼Œè€Œä¸æ˜¯å°å›¾æ ‡ï¼Œæ¯•ç«Ÿå¦‚æžœå°å›¾æ ‡å¤ªå°çš„è¯ï¼Œä¼šæ— æ³•ç›‘å¬åˆ°

`nav-bar`ç»„ä»¶ä¸èƒ½å†³å®šç”¨æˆ·ç‚¹å‡»è¿™ä¸ªå›¾æ ‡åŒºåŸŸåˆ°åº•è¦åšäº›æ˜¯å•¥äº‹ï¼Œè€Œæ˜¯äº¤ç»™ä½¿ç”¨è¿™ä¸ªç»„ä»¶çš„é¡µé¢æ¥å†³å®š

æ‰€ä»¥æˆ‘ä»¬è¦æŠŠè¿™ä¸ªäº‹ä»¶æŠ›å‡ºåŽ»

æ•ˆæžœï¼š

![æ•ˆæžœ](assets/img/2022-04-28-18-37-48.png)

è¿”å›žåˆ°ä¸Šä¸€çº§æ­Œæ›²è¿˜åœ¨æ’­æ”¾â€¦â€¦ -> è¿™é¦–æ­Œæ’­æ”¾å®Œï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ

å¦‚æžœé‡å¤ç‚¹å‡»åŒä¸€é¦–æ­Œå‘¢ï¼Ÿ -> ä¸éœ€è¦é‡å¤å‘é€ -> åˆ¤æ–­ä¸€ä¸‹`id`å³å¯ï¼

> [Demo](https://github.com/ppambler/QQMusic/commit/592bb16)

6ï¼‰ç­”ç–‘

> 1 11 17

ðŸ’¡ï¼šæ–‡å­—æ¸å˜

ä¼ªå…ƒç´ `::before` -> ç”¨ä¸€ä¸ªç›¸åŒçš„æœ‰é¢œè‰²çš„æ–‡å­—å åŠ ä¸ŠåŽ»ï¼Œè¿™ä¸ªå®Œå…¨å åŠ æ˜¯æ…¢æ…¢è¿‡æ¸¡çš„ï¼Œä¹Ÿå°±æ˜¯å®½åº¦ä»Ž`0%`åˆ°`100%`

âž¹ï¼š[sample-code/lyrics-progress.html at main Â· oceanbaby715/sample-code](https://github.com/oceanbaby715/sample-code/blob/main/css/lyrics-progress.html)

7ï¼‰æŽŒæ¡æ’­æ”¾é¡µçš„æ’­æ”¾ç›‘å¬é€»è¾‘çš„æŠ½å–

ðŸ’¡ï¼šè¿™ä¸‰ä¸ªæ•°æ®è¦å…±äº«å—ï¼Ÿ

![æ•°æ®å…±äº«](assets/img/2022-04-29-20-23-55.png)

é¦–é¡µä¹Ÿè®¸ä¸ä¼šç”¨åˆ°å®ƒä»¬ï¼Œä½†æœªæ¥å°±ä¸ä¸€å®šäº†

ä¸ºäº†é•¿è¿œè€ƒè™‘ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬æŠ½ç¦»å‡ºåŽ»

æ—¢ç„¶è¦æŠ½ç¦»å®ƒä»¬ï¼Œé‚£ä¹ˆè¿™ä¸‰ä¸ªæ•°æ®æ˜¯æ¥è‡ªå“ªå„¿çš„å‘¢ï¼Ÿ -> æ‰€ä»¥äº§ç”Ÿè¿™äº›æ•°æ®çš„åœ°æ–¹ä¹Ÿè¦æŠ½ç¦»å‡ºåŽ»ï¼

ðŸ’¡ï¼šæ¥å›žæ‹–æ‹½æœ‰ bug -> å¾ˆæ…¢

![æ»‘å—](assets/img/2022-04-29-20-58-31.png)

æ»‘å—ä¼šæŠ–åŠ¨ï¼

> è¿™ä¸ª bug ä¾‹å­ï¼Œèƒ½è®©ä½ å¾ˆå¥½åœ°ç†è§£é¡µé¢ UI æ›´æ–°å’Œ `data` æ›´æ–°ä¸åŒæ­¥äº§ç”Ÿä»€ä¹ˆæ•ˆæžœ

ðŸ’¡ï¼šè¿™ä¸ªæŠ½å–è¿‡ç¨‹

- é¡µé¢çš„å†…éƒ¨äº‹ä»¶ã€é¡µé¢æ•°æ®ï¼ˆå¦‚`lyricScrollTop`ï¼‰ä¸è¦æŠ½å–
- ä½ è¦çŸ¥é“è¿™ä¸ªæ•°æ®æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Œè¿™ä¸ªæ•°æ®çš„äº§ç”Ÿéœ€è¦ä¾èµ–å“ªäº›æ•°æ®
- ä¸€ä¸ªå‡½æ•°ä¸è¦å¤ªé•¿

> [Demo](https://github.com/ppambler/QQMusic/commit/3f444b0)

8ï¼‰

> 38 30







