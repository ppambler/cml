### âœï¸ Tangxt â³ 2022-04-01 ðŸ·ï¸ å°ç¨‹åº

# 07-HYMusic æ­Œå•å’Œæ­Œæ›²è¯¦æƒ…å¼€å‘

1ï¼‰æŽŒæ¡æœç´¢é¡µ-é˜²æŠ–ä¼˜åŒ–æœç´¢å»ºè®®

ðŸ’¡ï¼šåšä»€ä¹ˆï¼Ÿ

![Item](assets/img/2022-04-03-18-43-27.png)

å¯¹äº†ï¼Œä¸ç®¡ä½ æ˜¯åš PC ç«¯ï¼Œè¿˜æ˜¯ç§»åŠ¨ç«¯ï¼Œå¦‚å°ç¨‹åºã€æ‰‹æœº web åº”ç”¨ã€å®‰å“/IOS åº”ç”¨ï¼Œé¢å¯¹è¿™ç§æœç´¢åŠŸèƒ½éƒ½ä¼šåšé˜²æŠ–æ“ä½œï¼Œæ¯•ç«Ÿç”¨æˆ·è¾“å…¥éžå¸¸å¿«çš„è¯ï¼Œè¯·æ±‚å°±ä¼šéžå¸¸é¢‘ç¹äº†

æ¯”å¦‚ï¼šç”¨æˆ·æƒ³æœ`abc`ï¼Œç»“æžœå‘é€äº†ä¸‰æ¬¡è¯·æ±‚ -> æœç´¢`a`ã€æœç´¢`ab`ã€æœç´¢`abc`

å¯¹äºŽè¿™ç§æƒ…å†µï¼Œä¼šå¯¼è‡´ï¼š

1. å‰ç«¯æœ‰ä¸å¿…è¦çš„ç½‘ç»œæ€§èƒ½å¼€é”€ -> å½“ç„¶ï¼Œå¯¹å‰ç«¯è€Œè¨€è¿™æ ·çš„å½±å“æ˜¯æœ‰é™çš„ï¼Œè€Œå¯¹åŽç«¯å°±å½±å“å¾ˆå¤§äº†
2. åŽç«¯æœåŠ¡å™¨åŽ‹åŠ›å‰§å¢ž -> ä¸€ä¸ªç”¨æˆ·æ˜¾ç„¶ä¸ä¼šï¼Œä½†è¿™æ˜¾ç„¶å­˜åœ¨æˆåƒä¸Šä¸‡ä¸ªç”¨æˆ·åœ¨ä¸åŒç«¯ï¼ˆPCã€å°ç¨‹åºç­‰ï¼‰ï¼Œåœ¨åŒä¸€æ—¶åˆ»å‘é€æœç´¢è¯·æ±‚äº†ï¼Œè¿™æ ·ä¸å¿…è¦çš„å‘é€æ¬¡æ•°å°±ç´¯åŠ èµ·æ¥äº†ï¼Œæ‰€ä»¥æœåŠ¡å™¨çš„åŽ‹åŠ›ä¼šéžå¸¸éžå¸¸å¾—å¤§ -> å½“ç„¶ï¼Œå¦‚æžœæœåŠ¡å™¨æ€§èƒ½éžå¸¸å¼ºçš„è¯ï¼Œè¿™ä¸€ç‚¹å›ºç„¶æ²¡å•¥ï¼Œä½†è¿™æ²¡æœ‰å¿…è¦å“ˆï¼

å¯¹äºŽè¿™ä¸ªæœç´¢åŠŸèƒ½çš„å¤„ç†ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨é˜²æŠ–æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯èŠ‚æµï¼Œå½“ç„¶èŠ‚æµä¹Ÿè¡Œå“ˆ

ðŸ’¡ï¼šé˜²æŠ–å¤„ç†æœç´¢è¯·æ±‚

é˜²æŠ– -> ååŽæ‹¿åˆ°ç»“æžœ

å¯¹è°é˜²æŠ–ï¼Ÿ

![é˜²æŠ–](assets/img/2022-04-03-19-08-29.png)

åˆ›å»ºä¸€ä¸ª`debounce.js`ï¼š

- å¯ä»¥è®¾ç½®ç«‹å³æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡å°±ä¼šæ‰§è¡Œ
- å»¶æ—¶è®¾ç½®æˆ`300`ï¼Œä½ è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¼šç­‰å¾…`300ms`åŽæ‰å‘é€è¯·æ±‚ï¼Œå¦‚æžœï¼Œä½ åœ¨è¿™`300ms`æœŸé—´è¾“å…¥äº†å…¶å®ƒå­—ç¬¦ï¼Œé‚£ä¹ˆå°±ä¼šé‡æ–°ç­‰å¾…`300ms` -> ä½“çŽ°é˜²æŠ–æ•ˆæžœçš„è¯ï¼Œä½ å¯ä»¥è®¾ç½®æˆ`1000ms`

åªè¦ä½ è¾“å…¥åœé¡¿è¶³è¶³`300ms`å°±ä¼šå‘é€ä¸€æ¬¡è¯·æ±‚

> [Demo](https://github.com/ppambler/QQMusic/commit/e0569c9)

ðŸ’¡ï¼šæœç´¢å»ºè®®ä¼˜åŒ–ï¼šè¾“å…¥çš„å­—ç¬¦æ˜¯å¦åœ¨æœç´¢ç»“æžœé‡Œè¾¹é«˜äº®ï¼ˆä¹Ÿæ˜¯ç»¿è‰²ï¼‰åŒ¹é…ï¼Ÿ

è§‚å¯Ÿå…¶å®ƒ APPï¼š

- IOS ç«¯çš„ç½‘æ˜“äº‘éŸ³ä¹ -> æ²¡æœ‰åŒ¹é…åŠŸèƒ½
- æ‰‹æœº QQ éŸ³ä¹ã€QQ éŸ³ä¹å°ç¨‹åº -> æœ‰åŒ¹é…åŠŸèƒ½ -> å¤§å°å†™æ•æ„Ÿçš„åŒ¹é…ï¼Œä¸€èˆ¬åªåŒ¹é…å¼€å¤´ï¼Œå½“ç„¶å…¶å®ƒä¹Ÿæœ‰ä¸­é—´åŒ¹é…
- è¾“å…¥å­—ç¬¦`a`ï¼Œæ˜¯å¦è¦åŒ¹é…`çˆ±äººé”™è¿‡`ã€`é˜¿æ‹‰æ–¯åŠ æ¹¾`è¿™æ ·çš„æ‹¼éŸ³æ˜¯`a`å¼€å¤´çš„ä¸­æ–‡å­—ç¬¦ï¼Ÿ -> æ²¡æœ‰çœ‹åˆ°æ‰‹æœº QQ éŸ³ä¹ã€QQ éŸ³ä¹å°ç¨‹åºæœ‰åš -> [hotoo/pinyin: æ±‰å­—æ‹¼éŸ³ âžœ hÃ n zÃ¬ pÄ«n yÄ«n](https://github.com/hotoo/pinyin)

![åŒ¹é…é«˜äº®](assets/img/2022-04-03-20-02-46.png)

> æœ€åŽä¸€ç‚¹çœ‹äº§å“éœ€æ±‚

2ï¼‰æŽŒæ¡æœç´¢é¡µ-å¯Œæ–‡æœ¬ä¼˜åŒ–æœç´¢å»ºè®®

ðŸ’¡ï¼šä¼˜åŒ–æœç´¢å»ºè®®

![æœç´¢å»ºè®®](assets/img/2022-04-03-20-14-49.png)

æ€Žä¹ˆåšï¼Ÿ

![æ€Žä¹ˆåš](assets/img/2022-04-04-19-12-05.png)

`rich-text`ï¼š

![å¯Œæ–‡æœ¬](assets/img/2022-04-04-19-23-24.png)

> æˆ‘ä»¬å‘å¾®ä¿¡æ—¶ï¼Œå¸¦è¡¨æƒ…åŒ…çš„ä¿¡æ¯å°±å¯ä»¥ç”¨å¯Œæ–‡æœ¬æ¥åš

![ä»£ç ](assets/img/2022-04-04-20-20-26.png)

> [Demo](https://github.com/ppambler/QQMusic/commit/1710f34)

ä½ å¯ä»¥å®Œå–„è¿™ä¸ªåŠŸèƒ½ï¼š

- ä¸­é—´ä¹Ÿå¯ä»¥åŒ¹é…ï¼Œä¸å•å•æ˜¯å¼€å¤´ -> æ­£åˆ™
- ä¸­æ–‡å­—ç¬¦ä¹Ÿå¯ä»¥åŒ¹é… -> ç”¨`pinyin`åº“

3ï¼‰

> 57 33















