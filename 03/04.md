### âœï¸ Tangxt â³ 2022-03-23 ðŸ·ï¸ å°ç¨‹åº

# 04-HYMusic â¾³ä¹â¾¸â»šæ­å»ºå’Œå¼€å‘

1ï¼‰æŽŒæ¡å…¶ä»–çŸ¥è¯†ç‚¹è¡¥å……

ðŸ’¡ï¼šMV è§†é¢‘å¯èƒ½æ’­æ”¾ä¸äº†ï¼Ÿ

æœ‰äº›æœåŠ¡å™¨ä¼šåšè¯·æ±‚æºéªŒè¯

![è¯·æ±‚æºéªŒè¯](assets/img/2022-03-23-12-08-34.png)

ðŸ’¡ï¼šå°ç¨‹åºé‡Œè‡ªå®šä¹‰ç»„ä»¶ï¼Œç»™å±žæ€§çš„é»˜è®¤å€¼æ˜¯ç”¨`value`ï¼Œè€Œä¸æ˜¯ Vue é‡Œè¾¹çš„`default`

![defalut](assets/img/2022-03-23-12-11-09.png)

ðŸ’¡ï¼š`setData`æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿæ˜¯åŒæ­¥æˆ–è€…å¼‚æ­¥çš„ï¼Œå¯¹äºŽæˆ‘ä»¬å¼€å‘è€…è€Œè¨€è¿™å¾ˆé‡è¦å—ï¼Ÿ

![setData](assets/img/2022-03-23-12-16-02.png)

å°ç¨‹åºçš„`setData`ï¼š

- æ›´æ–°`data`æ—¶æ˜¯åŒæ­¥çš„ -> ä¼˜ç‚¹ -> å¯ä»¥ç«‹åˆ»æ‹¿åˆ°æœ€æ–°æœ€æ­£ç¡®çš„å€¼
- æŠŠæ•°æ®æ¸²æŸ“åˆ°é¡µé¢æ—¶æ˜¯å¼‚æ­¥çš„

![setData](assets/img/2022-03-23-12-32-57.png)

react è®¾è®¡æˆå¼‚æ­¥çš„æ˜¯ï¼Œæ˜¯è®©`data`æ°¸è¿œå’Œé¡µé¢æ˜¾ç¤ºçš„æ•°æ®æ˜¯ä¿æŒä¸€è‡´çš„ï¼Œå¹¶ä¸”ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ä¹Ÿæ˜¯æ°¸è¿œä¿æŒä¸€è‡´çš„ï¼

> react æƒ³è¦æ‹¿åˆ°æœ€æ–°æ•°æ® -> `setState`å¯ä»¥æŽ¥æ”¶ä¸€ä¸ªå›žè°ƒï¼Œç­‰é¡µé¢æ›´æ–°äº†å°±ä¼šæ‹¿åˆ°æœ€æ–°çš„å€¼

è€Œå°ç¨‹åºåˆ™ä¸åŒäº†ï¼Œè€å¸ˆä¸å–œæ¬¢å°ç¨‹åºçš„è¿™ç§è®¾è®¡æ–¹æ¡ˆï¼Œå› ä¸ºè°ƒè¯•ä¸æ–¹ä¾¿

> è€å¸ˆè®²è¯¾çš„ä¹ æƒ¯ -> å–œæ¬¢æŠŠå…¶ä»–æŠ€æœ¯é‡Œè¾¹çš„çŸ¥è¯†æ‹¿æ¥å’Œæ­£åœ¨è®²çš„è¿™ä¸ªçŸ¥è¯†è¿›è¡Œå¯¹æ¯”ï¼Œæ¯”å¦‚è®² JSï¼Œå°±ä¼šçœ‹çœ‹ Vueã€React æ˜¯æ€Žæ ·çš„ï¼Œè®²å°ç¨‹åºï¼Œå°±ä¼šçœ‹çœ‹ Vueã€React æ˜¯æ€Žæ ·çš„ -> å¯¹æ¯”ä¸€ä¸‹ï¼Œçœ‹çœ‹ä¸åŒçš„çŸ¥è¯†ä¹‹é—´åˆ°åº•æœ‰ä»€ä¹ˆè”ç³»æˆ–è€…æœ‰ä»€ä¹ˆæ ·çš„ä¸åŒï¼Œåˆæˆ–è€…è¿™ç§åšæ³•æœ‰å•¥ä¼˜ç‚¹ï¼Œæœ‰å•¥ç¼ºç‚¹â€¦â€¦ -> ç»å¸¸æ€§åœ°å¯¹æ¯”æ¥çœ‹ï¼Œå°±è¿™æ ·ï¼Œé€æ¸åœ°ä½ å°±èƒ½å½¢æˆè‡ªå·±çš„æ€æƒ³äº†

![setState](assets/img/2022-03-23-16-19-17.png)

2ï¼‰æŽŒæ¡éŸ³ä¹ç•Œé¢-è½®æ’­å›¾çš„ç»†èŠ‚å¤„ç†

ðŸ’¡ï¼šä¼˜åŒ–ï¼šè½®æ’­å›¾çš„è¾¹ç¼˜æ˜¯æœ‰é—´è·çš„

ç»™é—´è·æœ‰ä¸¤ä¸ªæ€è·¯ï¼š

1. å•ç‹¬ç»™`swiper`çš„å·¦å³ä¸¤è¾¹ä¸€ä¸ª`padding`å°±å¾—äº†
2. ç»™æ•´ä¸ªé¡µé¢åŠ å·¦å³ä¸¤ä¸ªé—´è· -> æ¯•ç«Ÿå…¶å®ƒéƒ¨åˆ†ä¹Ÿè¦é—´è·

![é—´è·](assets/img/2022-03-23-16-25-38.png)

é€‰æ‹©ç¬¬äºŒç§ï¼š

![ç¬¬äºŒç§](assets/img/2022-03-23-16-38-22.png)

![ç¬¬äºŒç§](assets/img/2022-03-23-16-40-40.png)

ðŸ’¡ï¼šä¼˜åŒ–ï¼šæ•´ä¸ªé¡µé¢æœ‰é—´è·äº†ï¼Œä½†æœç´¢æ¡†ä¸éœ€è¦æœ‰é—´è·

![é—´è·](assets/img/2022-03-23-16-36-12.png)

åŽ»æŽ‰é»˜è®¤é—´è·ï¼š

![é—´è·](assets/img/2022-03-23-16-45-03.png)

ðŸ’¡ï¼šä¼˜åŒ–ï¼šç»™è½®æ’­å›¾å¢žåŠ åœ†è§’è¾¹æ¡†

![åœ†è§’](assets/img/2022-03-23-16-46-27.png)

ç»™è°åŠ åœ†è§’ï¼Ÿå›¾ç‰‡ï¼Ÿè¿˜æ˜¯`swiper`ï¼Ÿ

æ˜¾ç„¶æ˜¯`swiper`

![swiper](assets/img/2022-03-23-17-09-05.png)

> å›¾ç‰‡è¶…å‡ºåœ†è§’è¾¹æ¡†èŒƒå›´äº†ï¼Œé‚£ä¹ˆé‚£éƒ¨åˆ†å°±å¾—éšè—æŽ‰ï¼Œä¸ç„¶åœ†è§’æ— æ³•æ˜¾ç¤ºå‡ºæ¥ï¼Œä¼šè¢«å›¾ç‰‡ç»™é®ä½

å¦‚æžœä½ å‘çŽ°å·¦ä¸Šè§’æ²¡æœ‰åœ†è§’ï¼Œé‚£ä¹ˆè¿™æ˜¯æ¨¡æ‹Ÿå™¨çš„é—®é¢˜ï¼Œä¸æ˜¯ä½ å†™çš„è¿™ä¸ªä»£ç æœ‰é—®é¢˜ï¼Œä½ åœ¨çœŸæœºè°ƒè¯•ä¸Šï¼Œæ˜¯ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜çš„ï¼

å½“ç„¶ï¼Œæœ‰äº›æ‰‹æœºç³»ç»Ÿï¼Œæ˜¯ä¸ä¼šæ˜¾ç¤ºåœ†è§’çš„ï¼Œæˆ‘ä»¬çŸ¥é“å°ç¨‹åºçš„é¡µé¢æ¸²æŸ“æ˜¯æ‰‹æœºç³»ç»Ÿæä¾›çš„ webviewï¼Œè€Œå®ƒçš„ webview ä¸æ”¯æŒ`border-raduis`ï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹ HTML çš„æ¸²æŸ“æœ‰äº›åœ°æ–¹ä¸æ”¯æŒã€‚æˆ‘ä»¬åœ¨åš h5 å¼€å‘æ—¶ï¼Œä¹Ÿä¼šæ—¶å¸¸é‡åˆ°è¿™æ ·çš„é€‚é…é—®é¢˜

![é€‚é…](assets/img/2022-03-23-17-16-21.png)

3ï¼‰æŽŒæ¡éŸ³ä¹é¡µé¢-å°è£… Header ç»„ä»¶å’Œæ’æ§½ä½¿ç”¨

> åªè¦æ˜¯æŠ€æœ¯ä¸Šçš„é—®é¢˜ï¼Œéƒ½ä¼šæœ‰å¯¹åº”çš„è§£å†³æ–¹æ¡ˆ -> è€å¸ˆè®²äº†å¾ˆå¤šå°é—®é¢˜ï¼Œæœ‰äº›å°é—®é¢˜æŒºéš¾è§£å†³çš„ï¼Œæ¯”å¦‚åˆšåˆšé‚£ä¸ª`transform: translateY(0);`çš„æ·»åŠ ï¼Œä½†è¿™ç»ˆå½’éƒ½ä¼šæœ‰è§£å†³æ–¹æ¡ˆï¼ˆæŸ¥ Stack Overflow æˆ–è€… Issuesï¼‰ -> æœ‰æ—¶ä½ ä¼šé‡åˆ°åŸºç¡€åº“çš„é—®é¢˜ï¼Œä½†ä½ ä¸è¦å°±è¿™æ ·è®¤ä¸ºï¼Œè¿™ä¸ªé—®é¢˜æ— æ³•è§£å†³äº†ï¼Œå…¶å®žè¿˜æ˜¯å¯ä»¥è§£å†³çš„ -> å°ç¨‹åºä¸æ”¯æŒçš„åŠŸèƒ½ï¼Œè¿˜æ˜¯æœ‰å…¶å®ƒé€”å¾„å¯ä»¥å®žçŽ°è¿™ä¸ªåŠŸèƒ½çš„

ðŸ’¡ï¼šåšä»€ä¹ˆï¼Ÿ

![åšä»€ä¹ˆ](assets/img/2022-03-23-18-47-01.png)

æˆ‘ä»¬è¦å®Œæˆä¸¤éƒ¨åˆ†å†…å®¹ï¼š

1. Header ç»„ä»¶å°è£… -> æ¶‰åŠæ’æ§½çš„ä½¿ç”¨ -> å¦‚ä½•ç»™æ’æ§½è®¾ç½®é»˜è®¤å€¼
   1. å°ç¨‹åºä¸æ”¯æŒç»™æ’æ§½è®¾ç½®é»˜è®¤å€¼ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ«çš„æ–¹æ¡ˆæ¥è®¾ç½® -> æœ‰äº›åŠŸèƒ½æˆ‘ä»¬ç‰¹åˆ«æƒ³ç”¨ï¼Œä½†å°ç¨‹åºä¸æ”¯æŒï¼Œè€Œä¸”è¿™äº›åŠŸèƒ½å®žçŽ°èµ·æ¥ä¹Ÿéžå¸¸ç®€å•ï¼Œæ›´ä½•å†µåœ¨ 17ã€18 å¹´å°±æå‡ºæ¥äº†ï¼Œåˆ°çŽ°åœ¨ 2022 å¹´äº†ï¼Œè¿™ç®€å•çš„åŠŸèƒ½è¿˜æ˜¯ä¸æ”¯æŒ
   2. è€å¸ˆä¼šæä¾›ä¸€ç§å¾ˆä¼˜é›…çš„æ–¹æ¡ˆæ¥å®žçŽ°ç»™æ’æ§½è®¾ç½®é»˜è®¤å€¼
2. å¤šä¸ªé¡µé¢ä¹‹é—´å¦‚ä½•å…±äº«æ•°æ® -> å°ç¨‹åºæä¾›çš„æ–¹æ¡ˆï¼š`app.js`ï¼Œæ— æ³•å“åº”å¼ -> ç”¨å…¶å®ƒå…±äº«æ•°æ®æ–¹æ¡ˆï¼Œå¯ä»¥åšåˆ°å“åº”å¼
   1. éŸ³ä¹é¦–é¡µï¼šæ­Œæ›²æŽ¨èçš„åˆ—è¡¨æ•°æ®
   2. æœç´¢é¡µé¢ï¼šä¹Ÿæœ‰æ­Œæ›²æŽ¨èçš„åˆ—è¡¨æ•°æ®

ðŸ’¡ï¼šå°è£…`Header`ç»„ä»¶

ä¸ºå•¥è¦å°è£…ï¼Ÿ -> å¾ˆå¤šä¸ªåœ°æ–¹éƒ½ä¼šç”¨åˆ° -> æœ‰äº›åœ°æ–¹æ ‡é¢˜ä¸åŒï¼Œæœ‰äº›åœ°æ–¹æ²¡æœ‰ã€Œæ›´å¤šã€è¿™æ ·çš„æ–‡æœ¬ -> æˆ‘ä»¬è¦å°è£…çš„æ›´é€šç”¨ä¸€äº›

1. åˆ›å»ºä¸€ä¸ª`area-header`ç»„ä»¶ -> æ”¾åœ¨`components`é‡Œè¾¹
2. å®šä¹‰`wxml`ã€ç»™æ ·å¼ã€ç»™å±žæ€§
   1. æ¶‰åŠåˆ°å›¾æ ‡ -> å¯ä»¥ç”¨ vant ç»„ä»¶åº“ï¼Œä½†æ²¡å¿…è¦ï¼Œç”¨å›¾ç‰‡å°±å¥½äº†
3. ä½¿ç”¨ç»„ä»¶
   1. æ³¨å†Œç»„ä»¶

`wxml`ï¼š

![wxml](assets/img/2022-03-23-19-04-38.png)

æ•ˆæžœï¼š

![æ’æ§½](assets/img/2022-03-23-19-03-58.png)

---

æ˜¯å¦æ˜¾ç¤ºå³è¾¹ï¼Ÿ -> æ·»åŠ `showRight`å±žæ€§ï¼Œé»˜è®¤æ˜¯æ˜¾ç¤ºçš„

![å³è¾¹](assets/img/2022-03-23-19-09-57.png)

ä½ åœ¨ä½¿ç”¨æ—¶ï¼Œç»™ä¸ª`false`å€¼å°±è¡Œäº†ï¼š

![false](assets/img/2022-03-23-19-07-54.png)

---

ä½¿ç”¨æ’æ§½ï¼ŒæŒ‡å®šä½ æƒ³è¦çš„å³è¾¹éƒ¨åˆ†

å°ç¨‹åºåšä¸åˆ°è¿™æ ·ï¼š

![æ’æ§½](assets/img/2022-03-23-19-13-29.png)

æˆ‘ä»¬çš„éœ€æ±‚æ˜¯ï¼šç»™æ’æ§½å†…å®¹ï¼Œé‚£å°±æ˜¾ç¤ºç»™çš„å†…å®¹ï¼Œä¸ç»™æ’æ§½å†…å®¹ï¼Œé‚£å°±æ˜¾ç¤ºç»„ä»¶é»˜è®¤ç»™çš„

ä¸€ç§å¾ˆç¬¨çš„æ–¹æ¡ˆï¼Œç”¨ JS æ¥æŽ§åˆ¶æ˜¾ç¤ºå’Œéšè—ï¼š

![æ–¹æ¡ˆä¸€](assets/img/2022-03-23-19-20-09.png)

å¯¹ä½¿ç”¨è¿™ä¸ªç»„ä»¶çš„å¼€å‘è€…è€Œè¨€ï¼Œè¿™ç§ä½“éªŒå¾ˆä¸å¥½ -> æ¯æ¬¡å†™æ’æ§½å†…å®¹éƒ½å¾—ä¼ å…¥é‚£ä¸ª`showMore`å±žæ€§

å¦ä¸€ç§æ–¹æ¡ˆï¼Œç”¨ CSSï¼š

ä½¿ç”¨`empty`è¿™ä¸ªä¼ªç±»ï¼Œå®ƒå¯ä»¥åˆ¤æ–­ä¸€ä¸ªç»„ä»¶çš„å­ç»„ä»¶æ˜¯å¦ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå…ƒç´ æ˜¯å¦æœ‰å­å…ƒç´ ï¼ˆå³ä¾¿ä½ æ˜¯ä¸ªå›žè½¦ç©ºç™½å­—ç¬¦ï¼Œè¿™ä¹Ÿä»£è¡¨æ²¡æœ‰å­å…ƒç´ ï¼‰

![æ–¹æ¡ˆäºŒ](assets/img/2022-03-23-19-32-09.png)

è¿™ä¸ªæ–¹æ¡ˆå¥½å¾ˆå¤šï¼Œéžå¸¸æ–¹ä¾¿ï¼Œä¸ç”¨åœ¨ JS é‡Œè¾¹å®šä¹‰ä¸€ä¸ªä¸ªå±žæ€§äº†ï¼Œä½¿ç”¨è€…ä¹Ÿä¸ç”¨å†™ä¸€äº›å¾ˆç¹ççš„å±žæ€§äº†ï¼Œæ¯”å¦‚`showMore`å±žæ€§

> [Demo](https://github.com/ppambler/QQMusic/commit/4b5e5b2)

4ï¼‰




